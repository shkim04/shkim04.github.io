{"componentChunkName":"component---src-templates-blog-post-js","path":"/nestjs-graphql-prisma-postgresql-구성하기/","result":{"data":{"site":{"siteMetadata":{"title":"Seunghyun's Blog"}},"markdownRemark":{"id":"6ebbfff5-1d1c-57ea-a9fc-522f6b75202b","excerpt":"graphql-prisma-postgresql 브랜치에서 전체 코드를 확인하실 수 있습니다. 지난 글에 언급된 비즈니스 로직을 개발하기 위해 데이터 모델을 정의해야 합니다. Prisma…","html":"<p><em><a href=\"https://github.com/shkim04/find-your-wc/tree/graphql-prisma-postgresql\">graphql-prisma-postgresql</a> 브랜치에서 전체 코드를 확인하실 수 있습니다.</em></p>\n<p><a href=\"https://shkim04.github.io/%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-find-your-wc/\">지난 글</a>에 언급된 비즈니스 로직을 개발하기 위해 데이터 모델을 정의해야 합니다. <strong>Prisma</strong>가 직관적이며 타입-안정성을 보장하기 때문에 데이터 모델을 정의하는 목적으로 사용될 것입니다. 모델을 정의하고 나면 사용하고자 하는 데이터베이스에 모델을 등록할 것입니다. 그런 다음 클라이언트와 데이터베이스 사이의 요청과 응답을 처리하는 <strong>GraphQL</strong> 서버를 둘 것입니다.</p>\n<h2>Prisma</h2>\n<p>먼저 아래의 명령어를 사용하여 Prisma schema 파일을 만듭니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm install prisma\nnpx prisma init\n</code></pre></div>\n<p>필자는 아래와 같이 데이터 모델을 정의했습니다. 데이터베이스에 <strong>Toilet</strong>, <strong>Address</strong>, <strong>Review</strong>이라는 테이블을 두었습니다. 여기서 <strong>Toilet</strong>이 <strong>Address</strong>, <strong>Review</strong>와 각각 관계를 형성하고 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">model Toilet <span class=\"token punctuation\">{</span>\n  id      String   @id @<span class=\"token keyword\">default</span><span class=\"token punctuation\">(</span><span class=\"token function\">uuid</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  address Address<span class=\"token operator\">?</span>\n  reviews Review<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  isPaid  Boolean\n  price   Int\n<span class=\"token punctuation\">}</span>\n\nmodel Address <span class=\"token punctuation\">{</span>\n  id           String  @id @<span class=\"token keyword\">default</span><span class=\"token punctuation\">(</span><span class=\"token function\">uuid</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  streetNumber String\n  street       String\n  city         String\n  country      String\n  toiletId     String  @unique\n  toilet       Toilet<span class=\"token operator\">?</span> @<span class=\"token function\">relation</span><span class=\"token punctuation\">(</span>fields<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>toiletId<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">references</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>id<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\nmodel Review <span class=\"token punctuation\">{</span>\n  id            String   @id @<span class=\"token keyword\">default</span><span class=\"token punctuation\">(</span><span class=\"token function\">uuid</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  cleanliness   Float\n  performance   Float\n  description   String<span class=\"token operator\">?</span>  @db<span class=\"token punctuation\">.</span><span class=\"token function\">VarChar</span><span class=\"token punctuation\">(</span><span class=\"token number\">1024</span><span class=\"token punctuation\">)</span>\n  contributedBy String   @unique\n  toiletId      String\n  toilet        Toilet<span class=\"token operator\">?</span>  @<span class=\"token function\">relation</span><span class=\"token punctuation\">(</span>fields<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>toiletId<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">references</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>id<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n  createdAt     DateTime @<span class=\"token keyword\">default</span><span class=\"token punctuation\">(</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  updatedAt     DateTime @updatedAt\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>PostgrSQL 등록</h2>\n<p>개발 목적으로 <strong>Docker</strong>를 사용하여 로컬 컴퓨터에 <strong>PostgreSQL</strong> 데이터베이스를 설치합니다. 로컬 개발 환경이지만 배포 환경처럼 환경변수를 이용해 데이터베이스를 동작시키려고 합니다.</p>\n<p>설치를 위해 <code class=\"language-text\">.env</code> 파일에 다음 변수를 추가합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token constant\">POSTGRES_HOST</span><span class=\"token operator\">=</span><span class=\"token string\">'localhost'</span>\n<span class=\"token constant\">POSTGRES_PORT</span><span class=\"token operator\">=</span><span class=\"token number\">5432</span>\n<span class=\"token constant\">POSTGRES_USER</span><span class=\"token operator\">=</span><span class=\"token string\">'your-user-name'</span>\n<span class=\"token constant\">POSTGRES_PASSWORD</span><span class=\"token operator\">=</span><span class=\"token string\">'your-password'</span>\n<span class=\"token constant\">POSTGRES_NAME</span><span class=\"token operator\">=</span><span class=\"token string\">'your-postgres-name'</span></code></pre></div>\n<p><code class=\"language-text\">docker-compose.yml</code>에 다음 코드를 추가합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">services:\n  postgres:\n    image: postgres\n    restart: always\n    env_file:\n      - .env\n    environment:\n      - POSTGRES_USER=${POSTGRES_USER}\n      - POSTGRES_PASSWORD=${POSTGRES_PASSWORD}\n      - POSTGRES_NAME=${POSTGRES_NAME}\n      - POSTGRES_PORT=${POSTGRES_PORT}\n      - POSTGRES_HOST=${POSTGRES_HOST}\n    volumes:\n      - postgres:/var/lib/postgresql/data\n    ports:\n      - '5432:5432'\nvolumes:\n  postgres:</code></pre></div>\n<p>다음 명령어로 PostgreSQL을 실행시킵니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker-compose up -d</code></pre></div>\n<p>Docker Desktop이나 VScode extension로 데이터베이스 컨테이너가 잘 실행되는지 확인을 할 수 있습니다.</p>\n<p>이제 PostgreSQL에 데이터 모델을 등록합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npx prisma migrate dev --name [whatever-you-want]</code></pre></div>\n<p>등록이 끝나면 다음 명령어로 모든 테이블들이 생성되었는지 확인합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker exec -it [your-container-name] psql -U [your-user-name] [your-postgres-name]\n// And then, run the following query\n\\dt</code></pre></div>\n<p>Prisma schema 파일에 정의한 모든 테이블이 나타날 것입니다.</p>\n<h2>GraphQL</h2>\n<p><strong>GraphQL</strong>은 API를 위한 쿼리 언어입니다. REST API와는 달리 필요하지 않은 데이터까지 불러올 필요가 없습니다. 다시 말해 필요에 따라 응답으로 받고 싶은 필드 등을 선택적으로 정할 수 있습니다.</p>\n<p>편리하게도 NestJS에는 <code class=\"language-text\">@nestjs/graphql</code> 모듈이 내장되어 있습니다. 해당 패키지와 다른 필요 패키지들을 설치합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm i @nestjs/graphql @nestjs/apollo @apollo/server</code></pre></div>\n<p>화장실 데이터에 관한 요청/응답을 처리할 모듈이 필요합니다. <code class=\"language-text\">src</code> 폴더 하위에 <code class=\"language-text\">toilet</code> 폴더 안에 다음과 같은 파일들을 생성합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">src\n└── toilets\n    ├── dto\n    │   ├── args\n    │   │   ├── get-toilet.args.ts\n    │   │   └── get-toilets.args.ts\n    │   └── input\n    │       ├── create-toilet.input.ts\n    │       ├── delete-toilet.input.ts\n    │       └── update-toilet.input.ts\n    ├── models\n    │   └── toilets.ts\n    ├── toilets.module.ts\n    ├── toilets.repository.ts\n    ├── toilets.resolver.ts\n    └── toilets.service.ts</code></pre></div>\n<p>각각의 파일에 모든 코드를 설명하기보다는 몇몇 중요 파일들의 역할에 중점을 두겠습니다.</p>\n<ul>\n<li><strong>DTO</strong>는 Data Transfer Object의 약자입니다. <code class=\"language-text\">dto</code> 폴더 안에 GraqhQL 서버가 클라이언트로부터 어떤 데이터 필드와 타입을 받고 싶은지 정합니다.</li>\n<li><code class=\"language-text\">model</code> 폴더에는 GraphQL을 통해 어떤 필드와 타입을 처리할 것인지 Toilet 모델을 통해 정합니다.</li>\n<li><code class=\"language-text\">resolver</code> 파일에 query, mutation, subscription 등의 GraphQL 작업을 담당하는 controller 층을 정의합니다.</li>\n<li><code class=\"language-text\">repository</code> 파일에 데이터베이스와 CRUD 작업을 처리하는 repository 층을 정의합니다.</li>\n<li><code class=\"language-text\">service</code> 파일에 장시간 작업을 queue 추가하는 등의 서비스들을 제공하는 service 층을 정의합니다.</li>\n</ul>\n<blockquote>\n<p>알림: 필자는 code first 접근법을 사용했습니다 - <em>반대 개념으로는 schema first가 있습니다</em>. code first 접근법을 사용하려면 <code class=\"language-text\">@nestjs/graphql</code>에서 제공하는 데코레이터들을 정의된 클래스들에 적절하게 달아줘야 합니다.</p>\n</blockquote>\n<p><code class=\"language-text\">toilet</code> 모듈과 같이 address, review 모듈도 생성합니다.</p>\n<p>여기서 필자가 애를 먹었던 부분은 데이터베이스의 각 테이블들이 가지는 관계들을 해결하는 법이었습니다. Toilet 테이블이 Address와 Review 테이블과 관계를 형성하고 있다는 것을 기억하실 겁니다. GraphQL이 이 관계들을 처리하도록 필자는 <code class=\"language-text\">toilet</code> resolver 파일에 다음과 같이 했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//..</span>\n@<span class=\"token function\">Resolver</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Toilet<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ToiletsResolver</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>\n    <span class=\"token parameter\"><span class=\"token keyword\">private</span> readonly toiletService<span class=\"token operator\">:</span> ToiletsService<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">private</span> readonly addressService<span class=\"token operator\">:</span> AddressService<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">private</span> readonly reviewsService<span class=\"token operator\">:</span> ReviewsService<span class=\"token punctuation\">,</span></span>\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">//.. check out my git repo for the whole code</span>\n\n  @<span class=\"token function\">ResolveField</span><span class=\"token punctuation\">(</span><span class=\"token string\">'address'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Address<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">async</span> <span class=\"token function\">getAddressByToiletId</span><span class=\"token punctuation\">(</span>@<span class=\"token function\">Parent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> toilet<span class=\"token operator\">:</span> Toilet<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Promise<span class=\"token operator\">&lt;</span>Address<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>addressService<span class=\"token punctuation\">.</span><span class=\"token function\">getAddress</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">toiletId</span><span class=\"token operator\">:</span> toilet<span class=\"token punctuation\">.</span>id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  @<span class=\"token function\">ResolveField</span><span class=\"token punctuation\">(</span><span class=\"token string\">'reviews'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span>Review<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">async</span> <span class=\"token function\">getAllReviewsByToiletId</span><span class=\"token punctuation\">(</span>@<span class=\"token function\">Parent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> toilet<span class=\"token operator\">:</span> Toilet<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Promise<span class=\"token operator\">&lt;</span>Review<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>reviewsService<span class=\"token punctuation\">.</span><span class=\"token function\">getReviews</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">toiletId</span><span class=\"token operator\">:</span> toilet<span class=\"token punctuation\">.</span>id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Address/Review 서비스들을 불러왔고 <code class=\"language-text\">ResolveField</code> 데코레이터를 가진 메소드을 생성하여 문제를 해결했습니다.</p>\n<p>이제 간단한 앱 동작을 확인하기 위해 GraphQL로 테스트 요청을 해보겠습니다.</p>\n<h2>테스트 요청</h2>\n<h4>Create Toilet</h4>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0482c4d5efaed73deaa51c1ee7e60c47/73caa/create_toilet.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.278481012658226%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABC0lEQVR42oWRyU7CYBRGuzUxdqKTVgsdgJZOf6HYFhSHhPgCrnXr1vdPjikicYouTnI39+T77pWml7d44gY3X2FOG5x4yUXW4GYdg7BCjxbo0Zzj85hBJDDGNVogMCY1g2i+m9VRfkCSfYEWVOihQPUL9LBCCytUv0Qe5Zx4KXpY8vTyyrTdYsU1drrCiFvMuMFKWqyke2fWIWmhQJstUScCKyhxggLzQIbhZxhRxcPjM2F9h1NsOK23uItrHLHG/qC6wi5WSMooR5mWKGGB7GUow5/0KY/cBCNpsPMNjrjnLGux0u4rfULVz5GH2d94KcZ4gZOtd0t9TXNf8TvSv7K9sH9Mf7vfJJ+Fb6I7rTWl32yTAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"create-toilet\"\n        title=\"\"\n        src=\"/static/0482c4d5efaed73deaa51c1ee7e60c47/f058b/create_toilet.png\"\n        srcset=\"/static/0482c4d5efaed73deaa51c1ee7e60c47/c26ae/create_toilet.png 158w,\n/static/0482c4d5efaed73deaa51c1ee7e60c47/6bdcf/create_toilet.png 315w,\n/static/0482c4d5efaed73deaa51c1ee7e60c47/f058b/create_toilet.png 630w,\n/static/0482c4d5efaed73deaa51c1ee7e60c47/40601/create_toilet.png 945w,\n/static/0482c4d5efaed73deaa51c1ee7e60c47/73caa/create_toilet.png 1110w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h4>Create Address</h4>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e0581eead71e313ae2441a693b5e7e13/62a6a/create_address.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.202531645569614%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABgUlEQVR42p2RS2+bQBRGWXSZFvADBlwnvAzGBgawcQjgRlErtf0BXXTbLNv/vz0VA4sqUqSoi6M7izvfnDtXi/IKKzmzjmvWaYcbFzRdS3T5gps9sEzuWUQ1K3/PNpWsdjWGL1mnLaafo98euXFCbkSg0Oy0ZWK6uE4arH2DvW9YhCW6V7A5tmzyDiM6sdzNxCNnlruZeEIzAom5P7NISqxI4oQSEUp0L8cMCt5ZET+ff/Pj1x9Wcc22fkKUnxBFj8h7RDEg5KCqnfVohl+wjUvitCGILrhBjeHlKvCDl/H+LlPfsckHRD7gNt9x778imkdEOYb1cx2wjx2a7hdsIsk2rLgNGj6GZ2y/wvIrhF+r89hjHVrs/Ipz+oZzeUK0j4jqqqwU+UiHtggkRlIqdH8yM2ZMr8AYCST24QGRDTjl52nk01UFKrPRsBqwZY9m+gVGWk2B86gvGbc6jiOyDns0PXTqgan+w3E2NOMSIy7R714JDKbAt6CNm3zN7H8C/wIqvwQATs1rrAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"create-address\"\n        title=\"\"\n        src=\"/static/e0581eead71e313ae2441a693b5e7e13/f058b/create_address.png\"\n        srcset=\"/static/e0581eead71e313ae2441a693b5e7e13/c26ae/create_address.png 158w,\n/static/e0581eead71e313ae2441a693b5e7e13/6bdcf/create_address.png 315w,\n/static/e0581eead71e313ae2441a693b5e7e13/f058b/create_address.png 630w,\n/static/e0581eead71e313ae2441a693b5e7e13/40601/create_address.png 945w,\n/static/e0581eead71e313ae2441a693b5e7e13/62a6a/create_address.png 1122w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h4>Create Review</h4>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1d1106da9aff8c2c72309b0a53c8f5ab/d56e1/create_review.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 44.93670886075949%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABfklEQVR42pWST2/TMBxAI3FEapOUJm4Ya/40TZM2TpzU7dp0ZRoSByQufAC4shvf//KQk9JpAiE4PNmHn5+eLVtp1eBlmkna4K1PiHRDUir8fIebVEzzA3asyOSa8nDmVj0wyXZ4qz1OVDK6zXktoiuWn+/x8v0gWKhe7q/MAY0T14xDicg1Zs5OVD8zSVvctO3XK8sByww5K427rPEWNX4imcSSUbjBiSteTRO+fv/Bl29PvMla3rWPiOqMkB1Cnp4pO/xNh2VHJcmqIV9rgnRHkDTMYoUbVT32vMRbtrztD50Ith+Z6Q8IdcaXHX7VIerTsC+OWKbiZlETpoqbpGUea8JEE8QtXlwzjWpGocQr7hDlmWD/mUB/Yta+R+zOiO1FvLkUukmNkymczLxX+QJzbYMdV/jrY18o6kdE/YBo7hF6EAp1j1BDpeVEErtQOHLLOJK/SQ12JAehqSju8IvDQH6hOF6xzNfoC3PFOP678F+w7F9V8/KPsv8V/gSM7gRSjeQOZQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"create-review\"\n        title=\"\"\n        src=\"/static/1d1106da9aff8c2c72309b0a53c8f5ab/f058b/create_review.png\"\n        srcset=\"/static/1d1106da9aff8c2c72309b0a53c8f5ab/c26ae/create_review.png 158w,\n/static/1d1106da9aff8c2c72309b0a53c8f5ab/6bdcf/create_review.png 315w,\n/static/1d1106da9aff8c2c72309b0a53c8f5ab/f058b/create_review.png 630w,\n/static/1d1106da9aff8c2c72309b0a53c8f5ab/40601/create_review.png 945w,\n/static/1d1106da9aff8c2c72309b0a53c8f5ab/d56e1/create_review.png 1130w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h4>Get Toilet</h4>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/543686f4346cabb175a46aa855dbe2c0/0f246/get_toilet.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 73.41772151898735%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACF0lEQVR42oWUS2/aQBSFvW8a2xCYGVOIjYH4zYyxjR88QtPSplL6S7rusn/9VDNGdluRZvHJd/XpnDtX1uwoxd2Cg0R7OOULpr6AE3JQr4DpxBj5FQauAHU9TH2Ou4WA4awx9koMnBj6LMANneMdsRWaFVag/hY0LDFcZSBBARpsQfwChsthuALDhQDxCgyXGQbLDMPlRs3Dbu7R9EUKcyUwtBMQR2Bs8w7L3UCfhBDHZ/z4+QuTuMJ0XYOEDUhYX0Uz5glMT8C0k6vo9zHGqxRBfQaNakw2Z0yyJ3xIG1C+axEtJG6gGU4CM0phBil0O8atHatvPyd4PwtguqlKRvlHWOkTrKgCCSuQqO5RCe0YhscxEDmMFVeJdPsf7iOMvQIkakCjBkx8ApUkx14WtGiGncB44DCTDfT5FdlFOHrI2z1FDaztCybld7DsBLY9gG2PoMUBNGmgmbKyL2D66XXZX8JGCVn6GYyfQDc70PygkGIlVAk93u7Q+Y/Qy7vKVMok8eFStepf2XTW7e7c9fX9XanMsq+w8m9gqUy5B832Kp0SDqTotaqv7TB/BtucwYoDWPkIVh7B8gOIrPym7E+hTBfvQddHVb174bhRMjmrO3yLbodhrXbXJjyBin0ru5yMqnwzDfAWt7OwqyzTWdkXsO2jOhfCd51MCadxiVlSvcr9usZowXG3ykClMChBfPnzKHuCnt+cwbBwX8uxigAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"get-toilet\"\n        title=\"\"\n        src=\"/static/543686f4346cabb175a46aa855dbe2c0/f058b/get_toilet.png\"\n        srcset=\"/static/543686f4346cabb175a46aa855dbe2c0/c26ae/get_toilet.png 158w,\n/static/543686f4346cabb175a46aa855dbe2c0/6bdcf/get_toilet.png 315w,\n/static/543686f4346cabb175a46aa855dbe2c0/f058b/get_toilet.png 630w,\n/static/543686f4346cabb175a46aa855dbe2c0/40601/get_toilet.png 945w,\n/static/543686f4346cabb175a46aa855dbe2c0/0f246/get_toilet.png 1118w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2>정리</h2>\n<p>NestJS는 잘 짜여진 구조를 갖추고 있으며 한 서비스를 모듈화하는데 아주 용이합니다. 이러한 이유로 이후에 이 NestJS 앱을 분할된 마이크로 서비스들로 만드는 것을 고려하고 있습니다.</p>\n<p><em><a href=\"https://github.com/shkim04/find-your-wc/tree/graphql-prisma-postgresql\">graphql-prisma-postgresql</a> 브랜치에서 코드를 확인하실 수 있습니다.</em></p>\n<p><em><strong>읽어 주셔서 감사합니다. To be continued!</strong></em></p>\n<h3>참조</h3>\n<ul>\n<li><a href=\"https://docs.nestjs.com/graphql/quick-start\">https://docs.nestjs.com/graphql/quick-start</a></li>\n<li><a href=\"https://www.tomray.dev/nestjs-prisma\">https://www.tomray.dev/nestjs-prisma</a></li>\n<li><a href=\"https://dev.to/bitovi/creating-a-graphql-server-with-nestjs-3ap0\">https://dev.to/bitovi/creating-a-graphql-server-with-nestjs-3ap0</a></li>\n</ul>","frontmatter":{"title":"#4 NestJS GraphQL/Prisma/PostgreSQL 구성하기","date":"2023년 07월 05일","description":"","tag":["Project","NodeJS","Database"]},"fields":{"locale":"ko"}},"previous":{"fields":{"slug":"/프로젝트-find-your-wc"},"frontmatter":{"title":"#3 프로젝트 - Find Your W.C."}},"next":{"fields":{"slug":"/nestjs-guards-적용하기"},"frontmatter":{"title":"#5 리뷰 임의 삭제 방지를 위한 Guard 적용하기"}}},"pageContext":{"locale":"ko","isDefaultLang":true,"slug":"/nestjs-graphql-prisma-postgresql-구성하기","titleByLang":{"ko":"nestjs-graphql-prisma-postgresql-구성하기","en":"nestjs-graphql-prisma-postgresql-setup"},"dateFormat":"YYYY년 MM월 DD일","id":"6ebbfff5-1d1c-57ea-a9fc-522f6b75202b","previousPostId":"6aaef4a2-bd40-5688-933e-6533e5b11166","nextPostId":"ca3048de-bc02-5d1f-ad11-48348cffb441"}},"staticQueryHashes":[],"slicesMap":{}}