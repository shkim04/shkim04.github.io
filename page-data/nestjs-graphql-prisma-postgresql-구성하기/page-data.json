{"componentChunkName":"component---src-templates-blog-post-js","path":"/nestjs-graphql-prisma-postgresql-구성하기/","result":{"data":{"site":{"siteMetadata":{"title":"Seunghyun's Blog"}},"markdownRemark":{"id":"1404b0e5-ccd9-5a8d-adba-f20bc79b3753","excerpt":"graphql-prisma-postgresql 브랜치에서 코드를 확인하실 수 있습니다. 지난 글에 언급된 비즈니스 로직을 개발하기 위해 데이터 모델을 정의해야 합니다. Prisma…","html":"<p><em><a href=\"https://github.com/shkim04/find-your-wc/tree/graphql-prisma-postgresql\">graphql-prisma-postgresql</a> 브랜치에서 코드를 확인하실 수 있습니다.</em></p>\n<p><a href=\"https://shkim04.github.io/%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-find-your-wc/\">지난 글</a>에 언급된 비즈니스 로직을 개발하기 위해 데이터 모델을 정의해야 합니다. <strong>Prisma</strong>가 직관적이며 타입-안정성을 보장하기 때문에 데이터 모델을 정의하는 목적으로 사용될 것입니다. 모델을 정의하고 나면 사용하고자 하는 데이터베이스에 모델을 등록할 것입니다. 그런 다음 클라이언트와 데이터베이스 사이의 요청과 응답을 처리하는 <strong>GraphQL</strong> 서버를 둘 것입니다.</p>\n<h2>Prisma</h2>\n<p>먼저 아래의 명령어를 사용하여 Prisma schema 파일을 만듭니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm install prisma\r\nnpx prisma init\r\n</code></pre></div>\n<p>필자는 아래와 같이 데이터 모델을 정의했습니다. 데이터베이스에 <strong>Toilet</strong>, <strong>Address</strong>, <strong>Review</strong>이라는 테이블을 두었습니다. 여기서 <strong>Toilet</strong>이 <strong>Address</strong>, <strong>Review</strong>와 각각 관계를 형성하고 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">model Toilet <span class=\"token punctuation\">{</span>\r\n  id      String   @id @<span class=\"token keyword\">default</span><span class=\"token punctuation\">(</span><span class=\"token function\">uuid</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n  address Address<span class=\"token operator\">?</span>\r\n  reviews Review<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\r\n  isPaid  Boolean\r\n  price   Int\r\n<span class=\"token punctuation\">}</span>\r\n\r\nmodel Address <span class=\"token punctuation\">{</span>\r\n  id           String  @id @<span class=\"token keyword\">default</span><span class=\"token punctuation\">(</span><span class=\"token function\">uuid</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n  streetNumber String\r\n  street       String\r\n  city         String\r\n  country      String\r\n  toiletId     String  @unique\r\n  toilet       Toilet<span class=\"token operator\">?</span> @<span class=\"token function\">relation</span><span class=\"token punctuation\">(</span>fields<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>toiletId<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">references</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>id<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\nmodel Review <span class=\"token punctuation\">{</span>\r\n  id            String   @id @<span class=\"token keyword\">default</span><span class=\"token punctuation\">(</span><span class=\"token function\">uuid</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n  cleanliness   Float\r\n  performance   Float\r\n  description   String<span class=\"token operator\">?</span>  @db<span class=\"token punctuation\">.</span><span class=\"token function\">VarChar</span><span class=\"token punctuation\">(</span><span class=\"token number\">1024</span><span class=\"token punctuation\">)</span>\r\n  contributedBy String   @unique\r\n  toiletId      String\r\n  toilet        Toilet<span class=\"token operator\">?</span>  @<span class=\"token function\">relation</span><span class=\"token punctuation\">(</span>fields<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>toiletId<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">references</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>id<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\r\n  createdAt     DateTime @<span class=\"token keyword\">default</span><span class=\"token punctuation\">(</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n  updatedAt     DateTime @updatedAt\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>PostgrSQL 등록</h2>\n<p>개발 목적으로 <strong>Docker</strong>를 사용하여 로컬 컴퓨터에 <strong>PostgreSQL</strong> 데이터베이스를 설치합니다. 로컬 개발 환경이지만 배포 환경처럼 환경변수를 이용해 데이터베이스를 동작시키려고 합니다.</p>\n<p>설치를 위해 <code class=\"language-text\">.env</code> 파일에 다음 변수를 추가합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token constant\">POSTGRES_HOST</span><span class=\"token operator\">=</span><span class=\"token string\">'localhost'</span>\r\n<span class=\"token constant\">POSTGRES_PORT</span><span class=\"token operator\">=</span><span class=\"token number\">5432</span>\r\n<span class=\"token constant\">POSTGRES_USERNAME</span><span class=\"token operator\">=</span><span class=\"token string\">'your-user-name'</span>\r\n<span class=\"token constant\">POSTGRES_PASSWORD</span><span class=\"token operator\">=</span><span class=\"token string\">'your-password'</span>\r\n<span class=\"token constant\">POSTGRES_NAME</span><span class=\"token operator\">=</span><span class=\"token string\">'your-postgres-name'</span></code></pre></div>\n<p><code class=\"language-text\">docker-compose.yml</code>에 다음 코드를 추가합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">services:\r\n  postgres:\r\n    image: postgres\r\n    restart: always\r\n    env_file:\r\n      - .env\r\n    environment:\r\n      - POSTGRES_USERNAME=${POSTGRES_USERNAME}\r\n      - POSTGRES_PASSWORD=${POSTGRES_PASSWORD}\r\n      - POSTGRES_NAME=${POSTGRES_NAME}\r\n      - POSTGRES_PORT=${POSTGRES_PORT}\r\n      - POSTGRES_HOST=${POSTGRES_HOST}\r\n    volumes:\r\n      - postgres:/var/lib/postgresql/data\r\n    ports:\r\n      - '5432:5432'\r\nvolumes:\r\n  postgres:</code></pre></div>\n<p>다음 명령어로 PostgreSQL을 실행시킵니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker-compose up -d</code></pre></div>\n<p>Docker Desktop이나 VScode extension로 데이터베이스 컨테이너가 잘 실행되는지 확인을 할 수 있습니다.</p>\n<p>이제 PostgreSQL에 데이터 모델을 등록합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npx prisma migrate dev --name [whatever-you-want]</code></pre></div>\n<p>등록이 끝나면 다음 명령어로 모든 테이블들이 생성되었는지 확인합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker exec -it [your-container-name psql] -U [your-user-name] [your-postgres-name]\r\n// And then, run the following query\r\n\\dt</code></pre></div>\n<p>Prisma schema 파일에 정의한 모든 테이블이 나타날 것입니다.</p>\n<h2>GraphQL</h2>\n<p><strong>GraphQL</strong>은 API를 위한 쿼리 언어입니다. REST API와는 달리 필요하지 않은 데이터까지 불러올 필요가 없습니다. 다시 말해 필요에 따라 응답으로 받고 싶은 필드 등을 선택적으로 정할 수 있습니다.</p>\n<p>편리하게도 NestJS에는 <code class=\"language-text\">@nestjs/graphql</code> 모듈이 내장되어 있습니다. 해당 패키지와 다른 필요 패키지들을 설치합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm i @nestjs/graphql @nestjs/apollo @apollo/server</code></pre></div>\n<p>화장실 데이터에 관한 요청/응답을 처리할 모듈이 필요합니다. <code class=\"language-text\">src</code> 폴더 하위에 <code class=\"language-text\">toilet</code> 폴더 안에 다음과 같은 파일들을 생성합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">src\r\n└── toilets\r\n    ├── dto\r\n    │   ├── args\r\n    │   │   ├── get-toilet.args.ts\r\n    │   │   └── get-toilets.args.ts\r\n    │   └── input\r\n    │       ├── create-toilet.input.ts\r\n    │       ├── delete-toilet.input.ts\r\n    │       └── update-toilet.input.ts\r\n    ├── models\r\n    │   └── toilets.ts\r\n    ├── toilets.module.ts\r\n    ├── toilets.repository.ts\r\n    ├── toilets.resolver.ts\r\n    └── toilets.service.ts</code></pre></div>\n<p>각각의 파일에 모든 코드를 설명하기보다는 몇몇 중요 파일들의 역할에 중점을 두겠습니다.</p>\n<ul>\n<li><strong>DTO</strong>는 Data Transfer Object의 약자입니다. <code class=\"language-text\">dto</code> 폴더 안에 GraqhQL 서버가 클라이언트로부터 어떤 데이터 필드와 타입을 받고 싶은지 정합니다.</li>\n<li><code class=\"language-text\">model</code> 폴더에는 GraphQL을 통해 어떤 필드와 타입을 처리할 것인지 Toilet 모델을 통해 정합니다.</li>\n<li><code class=\"language-text\">resolver</code> 파일에 query, mutation, subscription 등의 GraphQL 작업을 담당하는 controller 층을 정의합니다.</li>\n<li><code class=\"language-text\">repository</code> 파일에 데이터베이스와 CRUD 작업을 처리하는 repository 층을 정의합니다.</li>\n<li><code class=\"language-text\">service</code> 파일에 장시간 작업을 queue 추가하는 등의 서비스들을 제공하는 service 층을 정의합니다.</li>\n</ul>\n<blockquote>\n<p>알림: 필자는 code first 접근법을 사용했습니다 - <em>반대 개념으로는 schema first가 있습니다</em>. code first 접근법을 사용하려면 <code class=\"language-text\">@nestjs/graphql</code>에서 제공하는 데코레이터들을 정의된 클래스들에 적절하게 달아줘야 합니다.</p>\n</blockquote>\n<p><code class=\"language-text\">toilet</code> 모듈과 같이 address, review 모듈도 생성합니다.</p>\n<p>여기서 필자가 애를 먹었던 부분은 데이터베이스의 각 테이블들이 가지는 관계들을 해결하는 법이었습니다. Toilet 테이블이 Address와 Review 테이블과 관계를 형성하고 있다는 것을 기억하실 겁니다. GraphQL이 이 관계들을 처리하도록 필자는 <code class=\"language-text\">toilet</code> resolver 파일에 다음과 같이 했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//..</span>\r\n@<span class=\"token function\">Resolver</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Toilet<span class=\"token punctuation\">)</span>\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ToiletsResolver</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>\r\n    <span class=\"token parameter\"><span class=\"token keyword\">private</span> readonly toiletService<span class=\"token operator\">:</span> ToiletsService<span class=\"token punctuation\">,</span>\r\n    <span class=\"token keyword\">private</span> readonly addressService<span class=\"token operator\">:</span> AddressService<span class=\"token punctuation\">,</span>\r\n    <span class=\"token keyword\">private</span> readonly reviewsService<span class=\"token operator\">:</span> ReviewsService<span class=\"token punctuation\">,</span></span>\r\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\r\n  <span class=\"token comment\">//.. check out my git repo for the whole code</span>\r\n\r\n  @<span class=\"token function\">ResolveField</span><span class=\"token punctuation\">(</span><span class=\"token string\">'address'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Address<span class=\"token punctuation\">)</span>\r\n  <span class=\"token keyword\">async</span> <span class=\"token function\">getAddressByToiletId</span><span class=\"token punctuation\">(</span>@<span class=\"token function\">Parent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> toilet<span class=\"token operator\">:</span> Toilet<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Promise<span class=\"token operator\">&lt;</span>Address<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>addressService<span class=\"token punctuation\">.</span><span class=\"token function\">getAddress</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">toiletId</span><span class=\"token operator\">:</span> toilet<span class=\"token punctuation\">.</span>id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n  @<span class=\"token function\">ResolveField</span><span class=\"token punctuation\">(</span><span class=\"token string\">'reviews'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span>Review<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token keyword\">async</span> <span class=\"token function\">getAllReviewsByToiletId</span><span class=\"token punctuation\">(</span>@<span class=\"token function\">Parent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> toilet<span class=\"token operator\">:</span> Toilet<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Promise<span class=\"token operator\">&lt;</span>Review<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>reviewsService<span class=\"token punctuation\">.</span><span class=\"token function\">getReviews</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">toiletId</span><span class=\"token operator\">:</span> toilet<span class=\"token punctuation\">.</span>id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Address/Review 서비스들을 불러왔고 <code class=\"language-text\">ResolveField</code> 데코레이터를 가진 메소드을 생성하여 문제를 해결했습니다.</p>\n<p>이제 간단한 앱 동작을 확인하기 위해 GraphQL로 테스트 요청을 해보겠습니다.</p>\n<h2>테스트 요청</h2>\n<h4>Create Toilet</h4>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0482c4d5efaed73deaa51c1ee7e60c47/73caa/create_toilet.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.278481012658226%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABGUlEQVR42m2QTU/CUBBFuzQx0paWPhAQyqNAvz+kQAsRNFF/gVtdu/T/L45pKWjQxcnNZDIz946yWB24Sw/0wxJrsabnrhiGawZhiTHNMJwlhnPP9dDFdFLM2RJdppjzHMPJ0GWCZkdnFNVOaMuUtkzQJzHtaVqjTWLUccTNKKh7759fzItnLDdH+Fs6boHlbrAq9X5QqmW6v0KfJQgZ05MxlozpTCoCTDugM015fftA5o/04j23+Qv95QPddIdIGrIdItqiaHaItkhQZYQ6CtDGIeovqro1CrgaeJjuBhHt6SZP9MMC4ZdYflnrCaXKrTZDfwlpNb3qd91gi/BP8cpahXcR+TSsXjg7EpyPtZ3s6MgrGjf/O/wGCS2slIw/MosAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"create-toilet\"\n        title=\"\"\n        src=\"/static/0482c4d5efaed73deaa51c1ee7e60c47/f058b/create_toilet.png\"\n        srcset=\"/static/0482c4d5efaed73deaa51c1ee7e60c47/c26ae/create_toilet.png 158w,\n/static/0482c4d5efaed73deaa51c1ee7e60c47/6bdcf/create_toilet.png 315w,\n/static/0482c4d5efaed73deaa51c1ee7e60c47/f058b/create_toilet.png 630w,\n/static/0482c4d5efaed73deaa51c1ee7e60c47/40601/create_toilet.png 945w,\n/static/0482c4d5efaed73deaa51c1ee7e60c47/73caa/create_toilet.png 1110w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h4>Create Address</h4>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e0581eead71e313ae2441a693b5e7e13/62a6a/create_address.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.202531645569614%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABhElEQVR42n2QS2+bQBSFWXQXlYcdhsFxYoY3NvMAgyHYstqqavsHuuiy6jL/f32iGUgbVUoWny6MuB/njJVwBVJ0uM1a3FYTwpyjmwYkp68IDyPWxQAvabGOCmxLiXXawGECfjnCYxz2wx43NMYNZQYrqAaQakBQnrBKG/hFB7/oQcoeXqLgRAKbw4g7PsHV4uz4Dh0sh0m4ZYdVoUASCRoLBLGAE3F4TOADSfHrzxN+/n7COm+xbT+ByisoPyN4QSzzMMHSi/eZRF72iNMTNnFrZHZUw97V+PhwgJ+12OiF+oJN/wPh8A20uyKQi0zNk+wfdUKBu1RimzS4j3ts4yMIU/CZAmWNeda1/Wo0wvD4HeHpM+hwBW0uCOpphs/T8mIBN1dwcwmbcTi7Gm7E/+LsOFwmzN9pfQZVX0zloL0g0EKdUl1mxBmWGwk4pTJSLbNfs9TWLfT9aEg1GjmpFvaP/9515VUs54SZnJd1qlfos5eEZJG+h6U//l/wltAkXOZbwmet0AMFj5KWMAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"create-address\"\n        title=\"\"\n        src=\"/static/e0581eead71e313ae2441a693b5e7e13/f058b/create_address.png\"\n        srcset=\"/static/e0581eead71e313ae2441a693b5e7e13/c26ae/create_address.png 158w,\n/static/e0581eead71e313ae2441a693b5e7e13/6bdcf/create_address.png 315w,\n/static/e0581eead71e313ae2441a693b5e7e13/f058b/create_address.png 630w,\n/static/e0581eead71e313ae2441a693b5e7e13/40601/create_address.png 945w,\n/static/e0581eead71e313ae2441a693b5e7e13/62a6a/create_address.png 1122w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h4>Create Review</h4>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1d1106da9aff8c2c72309b0a53c8f5ab/d56e1/create_review.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 44.93670886075949%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABk0lEQVR42n2Py27TQBRAI7EDET+KPZPQEj/ysB2PPX6lSZyHBBILxIYf6LpL/n9zkCdpERXt4mg29545d7QoKrxVy828xst6xDwnyjUi2eBEJV66wwo1S7VGbY/cVWfcZYeX3OOEivFdynsR8EGEhpFI7/GTzUUQD/IOP+nwVy12VGIFBSLpGOasuDIz7ry+sGi4ecHIjjRO0uIuNX5cIuICN1R8nOVG+M6LeXj8za+HRz6tGm7rr8jyhFQ94iXrPSM7VESrimTdMllsmEY1MqpwggI3KLBnCm9ZM1U9Mj8wab8zab8h9Qmh9oiiR5S9ef1sNwgLPs81waLiNm74EnXMoo5JWOOHGi8oGQcKL90i1JHJ5ifT7geyOSM3J2R7vNTle8PIjUqclcZeaqwgx5oprEAxnuXmbHN6WCCyHSLvkXo4+YysD0YmmyOyOiD0wVSaQjurcIoGK7yIxoM4+Cu2BuF6b/DTLX62xU93/5JdMIX2UJhWz8In2ZNw+NQsXKVvYQqtoerKc9V/hKbwWvKa8A8XLwNeugp3agAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"create-review\"\n        title=\"\"\n        src=\"/static/1d1106da9aff8c2c72309b0a53c8f5ab/f058b/create_review.png\"\n        srcset=\"/static/1d1106da9aff8c2c72309b0a53c8f5ab/c26ae/create_review.png 158w,\n/static/1d1106da9aff8c2c72309b0a53c8f5ab/6bdcf/create_review.png 315w,\n/static/1d1106da9aff8c2c72309b0a53c8f5ab/f058b/create_review.png 630w,\n/static/1d1106da9aff8c2c72309b0a53c8f5ab/40601/create_review.png 945w,\n/static/1d1106da9aff8c2c72309b0a53c8f5ab/d56e1/create_review.png 1130w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h4>Get Toilet</h4>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/543686f4346cabb175a46aa855dbe2c0/0f246/get_toilet.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 73.41772151898735%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACFklEQVR42oWTS5OaQBRGXWcqCj7oRh0B8cGbBkRAfJSmZpJJTc0vyTbL/PYv1Q3iOI7J4lR3L/rw3duXlu7F6JkhiLeDnr9ibDMYbghipZB1H32rgGwykKmFsRWiN4vQMQIMrByy4aM9cfBADXxRNEFLdXMQew3qZOgtknq/hmKlkEwGacrQNSNx7s4TdGecGL15IuD797Q6ZgR5EaGnB1AMhoF+QZ0maI8csP0Lfv3+g5FfYBxsQNwSirMB4bjXtCQjgGQxSLoPSfMh6QFkPRBnvrY1D8oihlM8gbgFhskzhqsTRnEJwrYXoi2Iz4Vc5MaQnAht3ROCZtU8dHQfXx8dyGZcpWAnqNEJqpdDcYvbhB2easnQZStIi7CRXKG5UKx1fakEZd8q/EMjUpxCUCVcMshBgg5/tffCet/WXPSXaSMcZq8YZm9QV0fQbA+aHUDTPUhQ1j20I8h2VF/+v1CNn0DZETTZgq72QkbXZyG/uGRCejfhxMWgFlKvrGThUcyuYhcV55JlnnAeomMGjayR3ku4+gE1/Qk14il3Ap6OCOE0BH+YG9ld4aYSJs+iTJofLj30S7TOY3Ij+yBsSvZ3oMFBJBUf8Gr8sh6bjyPyGY2wEL0bpi9Q4yMoH2bvMjKihw+PDh7G/4YPdpMwOEBNvldlZgeQcHv1C7bGXo6JX9wn2GAwC9GfJyIhcXIodgbFzj/lL8F5rtZFFvmBAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"get-toilet\"\n        title=\"\"\n        src=\"/static/543686f4346cabb175a46aa855dbe2c0/f058b/get_toilet.png\"\n        srcset=\"/static/543686f4346cabb175a46aa855dbe2c0/c26ae/get_toilet.png 158w,\n/static/543686f4346cabb175a46aa855dbe2c0/6bdcf/get_toilet.png 315w,\n/static/543686f4346cabb175a46aa855dbe2c0/f058b/get_toilet.png 630w,\n/static/543686f4346cabb175a46aa855dbe2c0/40601/get_toilet.png 945w,\n/static/543686f4346cabb175a46aa855dbe2c0/0f246/get_toilet.png 1118w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2>정리</h2>\n<p>NestJS는 잘 짜여진 구조를 갖추고 있으며 한 서비스를 모듈화하는데 아주 용이합니다. 이러한 이유로 이후에 이 NestJS 앱을 분할된 마이크로 서비스들로 만드는 것을 고려하고 있습니다.</p>\n<p><em><a href=\"https://github.com/shkim04/find-your-wc/tree/graphql-prisma-postgresql\">graphql-prisma-postgresql</a> 브랜치에서 코드를 확인하실 수 있습니다.</em></p>\n<p><em><strong>읽어 주셔서 감사합니다. To be continued!</strong></em></p>\n<h3>참조</h3>\n<ul>\n<li><a href=\"https://docs.nestjs.com/graphql/quick-start\">https://docs.nestjs.com/graphql/quick-start</a></li>\n<li><a href=\"https://www.tomray.dev/nestjs-prisma\">https://www.tomray.dev/nestjs-prisma</a></li>\n<li><a href=\"https://dev.to/bitovi/creating-a-graphql-server-with-nestjs-3ap0\">https://dev.to/bitovi/creating-a-graphql-server-with-nestjs-3ap0</a></li>\n</ul>","frontmatter":{"title":"#4 NestJS GraphQL/Prisma/PostgreSQL 구성하기","date":"2023년 07월 05일","description":"","tag":["Project","NodeJS","GraphQL","Prisma","PostgreSQL"]},"fields":{"locale":"ko"}},"previous":{"fields":{"slug":"/프로젝트-find-your-wc"},"frontmatter":{"title":"#3 프로젝트 - Find Your W.C."}},"next":null},"pageContext":{"locale":"ko","isDefaultLang":true,"slug":"/nestjs-graphql-prisma-postgresql-구성하기","titleByLang":{"ko":"nestjs-graphql-prisma-postgresql-구성하기","en":"nestjs-graphql-prisma-postgresql-setup"},"dateFormat":"YYYY년 MM월 DD일","id":"1404b0e5-ccd9-5a8d-adba-f20bc79b3753","previousPostId":"a57c7c48-1d0b-53de-97bd-fcc0b551729d","nextPostId":null}},"staticQueryHashes":[],"slicesMap":{}}