{"componentChunkName":"component---src-templates-blog-post-js","path":"/en/link-postgresql-redis-application-in-docker-compose/","result":{"data":{"site":{"siteMetadata":{"title":"Seunghyun's Blog"}},"markdownRemark":{"id":"2e356326-4209-567c-8686-001b40bd42a0","excerpt":"Now that I have to deploy the application with Docker, it is necessary to link other services run with Docker containers to the application. For those who might…","html":"<p>Now that I have to deploy the application with <strong>Docker</strong>, it is necessary to link other services run with Docker containers to the application.</p>\n<blockquote>\n<p>For those who might read this article without reading the previous articles, You can find the whole backend code <a href=\"https://github.com/shkim04/find-your-wc\">here</a></p>\n</blockquote>\n<h2>Link Docker services</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/43e26d79cf98ab4f92994137b48bfb84/b1ffc/docker-compose-script.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.0126582278481%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAtUlEQVR42p2RwU7DMBBE/SO11+uNazvGAQRFHBD//1WvakqqFCEOPYxmZ95hD+Py0zvHcaL1Z2qeOJpiGgkhPCSXcqMtJ+ZSyEkRCQQJ+LCT/+X/yGkylrHQayFKQESIUdAY0ZtH0l0nd2zLUQSnqnyMxtdL5/tt8LnM1Mmo2ShTomVb85xtvYtduwurP1293JORTXFpKozeV7B98t5z8P7mh13+i/mdXEyJ194oplf44BjbKGcQQ6eSQ408iQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"docker-compose-script\"\n        title=\"\"\n        src=\"/static/43e26d79cf98ab4f92994137b48bfb84/f058b/docker-compose-script.png\"\n        srcset=\"/static/43e26d79cf98ab4f92994137b48bfb84/c26ae/docker-compose-script.png 158w,\n/static/43e26d79cf98ab4f92994137b48bfb84/6bdcf/docker-compose-script.png 315w,\n/static/43e26d79cf98ab4f92994137b48bfb84/f058b/docker-compose-script.png 630w,\n/static/43e26d79cf98ab4f92994137b48bfb84/40601/docker-compose-script.png 945w,\n/static/43e26d79cf98ab4f92994137b48bfb84/78612/docker-compose-script.png 1260w,\n/static/43e26d79cf98ab4f92994137b48bfb84/b1ffc/docker-compose-script.png 1492w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Since one docker container has its own environment, which means it has its own network, the services are not connected to one another, <strong>find_your_wc</strong>, <strong>postgres</strong>, <strong>redis</strong> here.</p>\n<p>The application <strong>find_your_wc</strong> use the other two services in its system, which means it should be connected to those services. We can achieve this by putting <code class=\"language-text\">links</code> flag under <code class=\"language-text\">find_your_wc</code> service in <code class=\"language-text\">docker-compose.yml</code> file.</p>\n<p><strong>postgres</strong> and <strong>redis</strong> services can be accessed by the name in the application. For example, we have saved the database url in <code class=\"language-text\">.env</code> file using <code class=\"language-text\">localhost</code> as a host name in development. To connect it from the application run on a docker container, we can now override it with <strong>postgres</strong> which is the host name of the service defined in <code class=\"language-text\">docker-compose.yml</code> - <em>Notice that this is seen under <strong>environment</strong> section</em>. By the same token, we can change redis host name to <strong>redis</strong> for the cache module.</p>\n<blockquote>\n<p>You might have to migrate <strong>Prisma</strong> to the database by entering <code class=\"language-text\">[package-manger] prisma migrate dev [proper-migration-name]</code> first while the service is running. This does not have to be done on the docker container shell. It can be done on your project folder on your local machine.</p>\n</blockquote>\n<p><em><strong>THANKS FOR READING. SEE YOU NEXT TIME!</strong></em></p>\n<h3>References</h3>\n<ul>\n<li><a href=\"https://docs.docker.com/compose/networking/\">https://docs.docker.com/compose/networking/</a></li>\n<li><a href=\"https://www.tomray.dev/nestjs-docker-compose-postgres\">https://www.tomray.dev/nestjs-docker-compose-postgres</a></li>\n</ul>","frontmatter":{"title":"#16 Link PostgresQL and Redis to Application in docker-compose","date":"15 Nov, 2023","description":"","tag":["Project"]},"fields":{"locale":"en"}},"previous":{"fields":{"slug":"/en/multi-stage-build-in-dockerfile-using-pnpm"},"frontmatter":{"title":"#15 Multi-stage build in Dockerfile using pnpm"}},"next":null},"pageContext":{"locale":"en","isDefaultLang":false,"slug":"/en/link-postgresql-redis-application-in-docker-compose","titleByLang":{"ko":"docker-compose로-postgresql과-redis-어플리케이션에-연결하기","en":"link-postgresql-redis-application-in-docker-compose"},"dateFormat":"DD MMM, YYYY","id":"2e356326-4209-567c-8686-001b40bd42a0","previousPostId":"c7e4ec0d-8096-517e-ac56-5dd7ff679876","nextPostId":null}},"staticQueryHashes":[],"slicesMap":{}}