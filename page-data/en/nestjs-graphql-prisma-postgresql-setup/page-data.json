{"componentChunkName":"component---src-templates-blog-post-js","path":"/en/nestjs-graphql-prisma-postgresql-setup/","result":{"data":{"site":{"siteMetadata":{"title":"Seunghyun's Blog"}},"markdownRemark":{"id":"0f616188-3df4-5446-9fb3-ebd026f05bc7","excerpt":"You can see the whole code on the graphql-prisma-postgresql branch. To develop the business logic mentioned in the last article, we will have to define the data…","html":"<p><em>You can see the whole code on the <a href=\"https://github.com/shkim04/find-your-wc/tree/graphql-prisma-postgresql\">graphql-prisma-postgresql</a> branch.</em></p>\n<p>To develop the business logic mentioned in <a href=\"https://shkim04.github.io/en/project-find-your-wc/\">the last article</a>, we will have to define the data model. <strong>Prisma</strong> will be used for the purpose since it is intuitive and type-safe. After defining the model, we will migrate it to a database we want to use. And then, we will have a <strong>GraphQL</strong> server that are responsible for handling requests and responses between clients and our database.</p>\n<h2>Prisma</h2>\n<p>First, we will create Prisma schema file using the commands shown below.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm install prisma\r\nnpx prisma init\r\n</code></pre></div>\n<p>I defined the data model for the project as shown below. Here, we have <strong>Toilet</strong>, <strong>Address</strong> and <strong>Review</strong> tables in our database. Notice <strong>Toilet</strong> has some relation to both <strong>Address</strong> and <strong>Review</strong>.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">model Toilet <span class=\"token punctuation\">{</span>\r\n  id      String   @id @<span class=\"token keyword\">default</span><span class=\"token punctuation\">(</span><span class=\"token function\">uuid</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n  address Address<span class=\"token operator\">?</span>\r\n  reviews Review<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\r\n  isPaid  Boolean\r\n  price   Int\r\n<span class=\"token punctuation\">}</span>\r\n\r\nmodel Address <span class=\"token punctuation\">{</span>\r\n  id           String  @id @<span class=\"token keyword\">default</span><span class=\"token punctuation\">(</span><span class=\"token function\">uuid</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n  streetNumber String\r\n  street       String\r\n  city         String\r\n  country      String\r\n  toiletId     String  @unique\r\n  toilet       Toilet<span class=\"token operator\">?</span> @<span class=\"token function\">relation</span><span class=\"token punctuation\">(</span>fields<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>toiletId<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">references</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>id<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\nmodel Review <span class=\"token punctuation\">{</span>\r\n  id            String   @id @<span class=\"token keyword\">default</span><span class=\"token punctuation\">(</span><span class=\"token function\">uuid</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n  cleanliness   Float\r\n  performance   Float\r\n  description   String<span class=\"token operator\">?</span>  @db<span class=\"token punctuation\">.</span><span class=\"token function\">VarChar</span><span class=\"token punctuation\">(</span><span class=\"token number\">1024</span><span class=\"token punctuation\">)</span>\r\n  contributedBy String   @unique\r\n  toiletId      String\r\n  toilet        Toilet<span class=\"token operator\">?</span>  @<span class=\"token function\">relation</span><span class=\"token punctuation\">(</span>fields<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>toiletId<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">references</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>id<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\r\n  createdAt     DateTime @<span class=\"token keyword\">default</span><span class=\"token punctuation\">(</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n  updatedAt     DateTime @updatedAt\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>Migrate to PostgrSQL</h2>\n<p>We will set up <strong>PostgreSQL</strong> database on our local machine for development using <strong>Docker</strong>. Even though this is a local development, we will use environment varaibales to run the database as if we deployed it on production.</p>\n<p>To begin to set it up, add the following variables in <code class=\"language-text\">.env</code> file:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token constant\">POSTGRES_HOST</span><span class=\"token operator\">=</span><span class=\"token string\">'localhost'</span>\r\n<span class=\"token constant\">POSTGRES_PORT</span><span class=\"token operator\">=</span><span class=\"token number\">5432</span>\r\n<span class=\"token constant\">POSTGRES_USER</span><span class=\"token operator\">=</span><span class=\"token string\">'your-user-name'</span>\r\n<span class=\"token constant\">POSTGRES_PASSWORD</span><span class=\"token operator\">=</span><span class=\"token string\">'your-password'</span>\r\n<span class=\"token constant\">POSTGRES_NAME</span><span class=\"token operator\">=</span><span class=\"token string\">'your-postgres-name'</span></code></pre></div>\n<p>Add the following code in <code class=\"language-text\">docker-compose.yml</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">services:\r\n  postgres:\r\n    image: postgres\r\n    restart: always\r\n    env_file:\r\n      - .env\r\n    environment:\r\n      - POSTGRES_USER=${POSTGRES_USER}\r\n      - POSTGRES_PASSWORD=${POSTGRES_PASSWORD}\r\n      - POSTGRES_NAME=${POSTGRES_NAME}\r\n      - POSTGRES_PORT=${POSTGRES_PORT}\r\n      - POSTGRES_HOST=${POSTGRES_HOST}\r\n    volumes:\r\n      - postgres:/var/lib/postgresql/data\r\n    ports:\r\n      - '5432:5432'\r\nvolumes:\r\n  postgres:</code></pre></div>\n<p>And run the PostgreSQL by entering:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker-compose up -d</code></pre></div>\n<p>We can check if the database container is running or not with Docker Desktop or VScode extension.</p>\n<p>Now, let's migrate the data model to the database:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npx prisma migrate dev --name [whatever-you-want]</code></pre></div>\n<p>Once the migration is done, check if all the tables are created in the database, run a docker command like:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker exec -it [your-container-name] psql -U [your-user-name] [your-postgres-name]\r\n// And then, run the following query\r\n\\dt</code></pre></div>\n<p>It will show all the tables we have defined in Prisma schema file.</p>\n<h2>GraphQL</h2>\n<p><strong>GraphQL</strong> is a query language for APIs. Unlike REST API, we do not have to retrieve data that we do not need. In other words, we can specify fields that we want to get as a response from an API based on our needs.</p>\n<p>Conveniently, there is the built-in <code class=\"language-text\">@nestjs/graphql</code> module in NestJS. Let's install the package and other necessary ones:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm i @nestjs/graphql @nestjs/apollo @apollo/server</code></pre></div>\n<p>We need a module that handles requests and response about toilet data. Let's create the following files in the <code class=\"language-text\">toilet</code> folder under the <code class=\"language-text\">src</code> folder:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">src\r\n└── toilets\r\n    ├── dto\r\n    │   ├── args\r\n    │   │   ├── get-toilet.args.ts\r\n    │   │   └── get-toilets.args.ts\r\n    │   └── input\r\n    │       ├── create-toilet.input.ts\r\n    │       ├── delete-toilet.input.ts\r\n    │       └── update-toilet.input.ts\r\n    ├── models\r\n    │   └── toilets.ts\r\n    ├── toilets.module.ts\r\n    ├── toilets.repository.ts\r\n    ├── toilets.resolver.ts\r\n    └── toilets.service.ts</code></pre></div>\n<p>Instead of explaining all the codes in each file, we will focus on what a few of important files do.</p>\n<ul>\n<li><strong>DTO</strong> stands for Data Transfer Object. We specify data types and fields that we want the GraphQL server to get from clients in the <code class=\"language-text\">dto</code> folder.</li>\n<li>We define the Toilet model to let the GraphQL know types and fields we need in the <code class=\"language-text\">model</code> folder.</li>\n<li>We define a controller layer that controls a GraphQL operation such as query, mutation and subscription in the <code class=\"language-text\">resolver</code> file.</li>\n<li>We define a repostory layer that does CRUD operations to our database in the <code class=\"language-text\">repository</code> file.</li>\n<li>We define a service layer that provides services added to it such as adding long-time operation to a queue in the <code class=\"language-text\">service</code> file.</li>\n</ul>\n<blockquote>\n<p>Note: I took the code first approach - <em>The opposite is the schema first approach</em>. For the code first approach, we should annotate classes with proper decorators provided by <code class=\"language-text\">@nestjs/graphql</code>.</p>\n</blockquote>\n<p>We will create address and review module in the same structure as the <code class=\"language-text\">toilet</code> module.</p>\n<p>Only thing that I was struggling with here is how to resolve relations each table of the database has. Recall that Toilet table has relations with Address and Review tables. To let the GraphQL be able to resolve these relations, I did like in the <code class=\"language-text\">toilet</code> resolver:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//..</span>\r\n@<span class=\"token function\">Resolver</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Toilet<span class=\"token punctuation\">)</span>\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ToiletsResolver</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>\r\n    <span class=\"token parameter\"><span class=\"token keyword\">private</span> readonly toiletService<span class=\"token operator\">:</span> ToiletsService<span class=\"token punctuation\">,</span>\r\n    <span class=\"token keyword\">private</span> readonly addressService<span class=\"token operator\">:</span> AddressService<span class=\"token punctuation\">,</span>\r\n    <span class=\"token keyword\">private</span> readonly reviewsService<span class=\"token operator\">:</span> ReviewsService<span class=\"token punctuation\">,</span></span>\r\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\r\n  <span class=\"token comment\">//.. check out my git repo for the whole code</span>\r\n\r\n  @<span class=\"token function\">ResolveField</span><span class=\"token punctuation\">(</span><span class=\"token string\">'address'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Address<span class=\"token punctuation\">)</span>\r\n  <span class=\"token keyword\">async</span> <span class=\"token function\">getAddressByToiletId</span><span class=\"token punctuation\">(</span>@<span class=\"token function\">Parent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> toilet<span class=\"token operator\">:</span> Toilet<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Promise<span class=\"token operator\">&lt;</span>Address<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>addressService<span class=\"token punctuation\">.</span><span class=\"token function\">getAddress</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">toiletId</span><span class=\"token operator\">:</span> toilet<span class=\"token punctuation\">.</span>id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n  @<span class=\"token function\">ResolveField</span><span class=\"token punctuation\">(</span><span class=\"token string\">'reviews'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span>Review<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token keyword\">async</span> <span class=\"token function\">getAllReviewsByToiletId</span><span class=\"token punctuation\">(</span>@<span class=\"token function\">Parent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> toilet<span class=\"token operator\">:</span> Toilet<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Promise<span class=\"token operator\">&lt;</span>Review<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>reviewsService<span class=\"token punctuation\">.</span><span class=\"token function\">getReviews</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">toiletId</span><span class=\"token operator\">:</span> toilet<span class=\"token punctuation\">.</span>id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>I brought Address/Review services and create methods with <code class=\"language-text\">ResolveField</code> decorator to solve the problem.</p>\n<p>Now, let's make some requests from GraphQL playground to simulate our app.</p>\n<h2>Test Requests</h2>\n<h4>Create Toilet</h4>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0482c4d5efaed73deaa51c1ee7e60c47/73caa/create_toilet.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.278481012658226%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABCElEQVR42oXRy07CQBSA4W6NibT0DlWgF2hpp+0UilBQiEbjC7g0cenW91/8pkjQoNHFl5zVn3NmlHix40ru8PI1VnyNmyy4FEs80WBEFXo0R49mnPcTjFBijmu6gcSc1BjRbD9ro/xIUX1JN6jQQ4nml+hhtdfOnVHOxSBDD0pe3t6JVw/YSY2TrbGSFXayxJ6usKfNp7RBaUPddIE2kdhBiRsUWEcC0xeYUcXT8ythfUev2NKrH/Hmtzhy86W6wSnWKOooR41L1LBAHQjU4U/tlmdeijld4uRbXHlPXzTY2Yl2Q83P6QzF3wYZxniOKzY4abM/0zqceEr5N3YIth/Tvt1vke/BD5Y/rTB3YPrzAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"create-toilet\"\n        title=\"\"\n        src=\"/static/0482c4d5efaed73deaa51c1ee7e60c47/f058b/create_toilet.png\"\n        srcset=\"/static/0482c4d5efaed73deaa51c1ee7e60c47/c26ae/create_toilet.png 158w,\n/static/0482c4d5efaed73deaa51c1ee7e60c47/6bdcf/create_toilet.png 315w,\n/static/0482c4d5efaed73deaa51c1ee7e60c47/f058b/create_toilet.png 630w,\n/static/0482c4d5efaed73deaa51c1ee7e60c47/40601/create_toilet.png 945w,\n/static/0482c4d5efaed73deaa51c1ee7e60c47/73caa/create_toilet.png 1110w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h4>Create Address</h4>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e0581eead71e313ae2441a693b5e7e13/62a6a/create_address.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.202531645569614%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABfUlEQVR42p2RS2+bQBRG2XTXFHACDDhOeJmHzTvgYMCNolZq+wMqdd0s2/+/PRWDG6VSI1VdHN27mDn6vhklzGvMuMWIGox0wIkKuqEnPHzE2R+5jO9ZhQ2Gl7BJS662NZpXYCQ9up+j3uy5sAPeCl+iWGnPjEjPF+MOM+mwko5VUKG6BevsyHUxooV3XG5fELUL2/Z5VzS/RE9aVnGFGZbYQYkVlKhuju4XvDFDvj394Ov3n1xFDZvmEVG9RxQTIh+XWU5yWtmIMsffRBVR2uGHBxy/QfNyKXznZlzcZhjbhnU+Cyac7gvO/SdE94CoZtmIqBeptR9QVK9gHZZsgpobv+M6aLG8GtOrEV4j9/mMuTti5Sfsu8/Yh0dE/4CoTzKVJJ8ZUFZz5bhCiyvUczLNLST6ec7PYu2OiGzCrj4slZuTFMpkc9J6wipHFN0r0NJ6Ebr5X9G8UtYR2YC166V8YfiT/e+EUYUWVai3rwj9RfgvKPNPvpbsf4S/ADsXBAgLV2U2AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"create-address\"\n        title=\"\"\n        src=\"/static/e0581eead71e313ae2441a693b5e7e13/f058b/create_address.png\"\n        srcset=\"/static/e0581eead71e313ae2441a693b5e7e13/c26ae/create_address.png 158w,\n/static/e0581eead71e313ae2441a693b5e7e13/6bdcf/create_address.png 315w,\n/static/e0581eead71e313ae2441a693b5e7e13/f058b/create_address.png 630w,\n/static/e0581eead71e313ae2441a693b5e7e13/40601/create_address.png 945w,\n/static/e0581eead71e313ae2441a693b5e7e13/62a6a/create_address.png 1122w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h4>Create Review</h4>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1d1106da9aff8c2c72309b0a53c8f5ab/d56e1/create_review.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 44.93670886075949%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABfUlEQVR42pWRQW+bQBBGkXqsZAOuYU3T2LAQwBjYxcbExnWi5tBD1Uv/QM459v8fXsWiJK5URenhSXPYefPNrJXUDV7aMksavOKESDbIUiPyPa6smecHbKnJqg3V4cy1vmeW7vGyDicsmVznfBThC5afd3h5NwpibeR+NjS0OJFiGtb42Y7hnR1r3Lgxw91ky+ySmxFrmO7kLW6q8GKFkBWzqGKyKrGjmg9zyePTb349PvEp3fKl+Yaoz4iqR1SnV8oef9Nj2WGFzBryoiVIOgLZsIga3LA22MsS72bLZ9N0Ith9Z9E+sNB3+FVvEOo01usjlhPVXMWKVaK5kluW0Z6VbAmiLV6kmIfKpPXWt4jyTND9JGh/sNjdIbozYnceZc8JXalwUo2TKuxVyfSCyWpjsIc7FgeTUKgHhLpHNF8R7Sg0tT7h1z2WE1bYRYNT75iG1V/CZ4az+MURsRnWusVfH/DzC9bHF14T5ppp9LbwPZhPMY3L8p+y/xX+AbqtBGurgoOkAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"create-review\"\n        title=\"\"\n        src=\"/static/1d1106da9aff8c2c72309b0a53c8f5ab/f058b/create_review.png\"\n        srcset=\"/static/1d1106da9aff8c2c72309b0a53c8f5ab/c26ae/create_review.png 158w,\n/static/1d1106da9aff8c2c72309b0a53c8f5ab/6bdcf/create_review.png 315w,\n/static/1d1106da9aff8c2c72309b0a53c8f5ab/f058b/create_review.png 630w,\n/static/1d1106da9aff8c2c72309b0a53c8f5ab/40601/create_review.png 945w,\n/static/1d1106da9aff8c2c72309b0a53c8f5ab/d56e1/create_review.png 1130w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h4>Get Toilet</h4>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/543686f4346cabb175a46aa855dbe2c0/0f246/get_toilet.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 73.41772151898735%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACFUlEQVR42oWTyVLbQBRFtQ/Bkg1WS45tCRuj2RptCXkIJIFAFfmSrLPLt5+UWi4PBYTFqdamT937XkuxgpSLaYwerLHLF4Zugu3PEU6BZodcuhXdSYIxdRi6cy6mCao9p++UdO2QzsjjTFzxSbckiulXCHeJ4Zf0Zjm6t0B4S3R3gTqJUSeJFPadgt51Rvc6k2fvOt+R0Z0eUNRpijZL6VkRup3Qt+I95iSjM/BJtk/8/vOXQVgxjG7R/Rrda87XKOpVhObEaFaENo7a84jOOECfpfj1o7wwyB4Y5Pd8SWtEvGpJWvSwRlHtCC1I0byUczvk3Arp7Gi/Iz6PPLRJKoUivsdMv2EGVZsqOEImtEJUJ6abFKizmM74INwzDug7C/SgRgQ1RvId0RBtDzKvRVGtCPUmRosyOldvyHbCy5til2iFuXxhUP7CyO8wlhuM5Rax2CCiGkVrKrsJmpu+LTsR1jKlkf7AiO8Q2QpRbCSNWAplwmYpXkrH/o/QKfaVRSNrCNe7qtV+64pmz9vZTeZvz+9V5Roz/4lZPGOmTco1Il/LdFLYbUTvVX1PWDxhZA8Yiw1G9RWj3GIUG/Sm8oeyI6HccLhGzLcIOc/dhsO6Jbht3+FHHCdsZtcmvEMk65MnIyufDX0+4nzkH4TRFjN/lE+lqazHq5PfUBkGJaOwepdxdMvlNOZiliMaoVeiu0d4p/wDYKmwXdm3/f4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"get-toilet\"\n        title=\"\"\n        src=\"/static/543686f4346cabb175a46aa855dbe2c0/f058b/get_toilet.png\"\n        srcset=\"/static/543686f4346cabb175a46aa855dbe2c0/c26ae/get_toilet.png 158w,\n/static/543686f4346cabb175a46aa855dbe2c0/6bdcf/get_toilet.png 315w,\n/static/543686f4346cabb175a46aa855dbe2c0/f058b/get_toilet.png 630w,\n/static/543686f4346cabb175a46aa855dbe2c0/40601/get_toilet.png 945w,\n/static/543686f4346cabb175a46aa855dbe2c0/0f246/get_toilet.png 1118w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2>Thoughts</h2>\n<p>NestJS is well-structured and easy for us to modularize a certain service by its nature. With that fact in mind, I think I might be going to make our NestJS app a few of microservices combined later in the future.</p>\n<p><em>You can see the whole code on the <a href=\"https://github.com/shkim04/find-your-wc/tree/graphql-prisma-postgresql\">graphql-prisma-postgresql</a> branch.</em></p>\n<p><em><strong>THANKS FOR READING. SEE YOU NEXT TIME!</strong></em></p>\n<h3>References</h3>\n<ul>\n<li><a href=\"https://docs.nestjs.com/graphql/quick-start\">https://docs.nestjs.com/graphql/quick-start</a></li>\n<li><a href=\"https://www.tomray.dev/nestjs-prisma\">https://www.tomray.dev/nestjs-prisma</a></li>\n<li><a href=\"https://dev.to/bitovi/creating-a-graphql-server-with-nestjs-3ap0\">https://dev.to/bitovi/creating-a-graphql-server-with-nestjs-3ap0</a></li>\n</ul>","frontmatter":{"title":"#4 NestJS GraphQL/Prisma/PostgreSQL Set Up","date":"05 Jul, 2023","description":"","tag":["Project","NodeJS","Database"]},"fields":{"locale":"en"}},"previous":{"fields":{"slug":"/en/project-find-your-wc"},"frontmatter":{"title":"#3 Project - Find Your W.C."}},"next":null},"pageContext":{"locale":"en","isDefaultLang":false,"slug":"/en/nestjs-graphql-prisma-postgresql-setup","titleByLang":{"ko":"nestjs-graphql-prisma-postgresql-구성하기","en":"nestjs-graphql-prisma-postgresql-setup"},"dateFormat":"DD MMM, YYYY","id":"0f616188-3df4-5446-9fb3-ebd026f05bc7","previousPostId":"d741b7f6-47b6-508b-b53d-77e44ecbe69c","nextPostId":null}},"staticQueryHashes":[],"slicesMap":{}}