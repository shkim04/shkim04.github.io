{"componentChunkName":"component---src-templates-blog-post-js","path":"/en/restapi-with-express-mongodb-typescript/","result":{"data":{"site":{"siteMetadata":{"title":"Seunghyun's Blog"}},"markdownRemark":{"id":"1e31fa77-0f0d-5970-87e3-a3e82b6d21df","excerpt":"I usually think of REST API as a menu book of a restaurant. When customers look at the menu book, they are able to know what foods the restaurant serves…","html":"<p>I usually think of REST API as a menu book of a restaurant. When customers look at the menu book, they are able to know what foods the restaurant serves. Similarly, when developers look at a REST API document, they are able to know what kind of features the company, which provides the REST API, serves. In an API document, you can see a list of URLs and descriptions of each URL. If you make a request to one of those URLs, you will get a response from it. Then, you can modify the response as you want for your application.</p>\n<h2>Prerequisite</h2>\n<ul>\n<li>Node.js + Typescript</li>\n<li>MongoDB</li>\n<li>Insomnia</li>\n</ul>\n<h2>Create MongoDB Database</h2>\n<p>Let’s go into how to set up MongoDB. MongoDB is a NoSQL database which is one of the most widely used databases in the world and it is so easy to implement CRUD operation which is for create, retrieve, update and delete.</p>\n<p>You will need to create an account or sign up with your google or github account. You don’t have to pay first. It means you can try it for free and as your application handles lots of data coming in and out, you may have to pay for it as you go.</p>\n<p>Once you created the account and sign in, you can see the dashboard that looks like:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3a8ad2fc6c44825ba1ca050587fc4387/c0255/mongodb-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.69620253164557%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB3UlEQVR42o2SS4sVMRCF+/+vBwQXoz9BdKFwXehi0IU7cQSReXhf07fTeXSnk07SySfdtx0QRC04VCqVOqmcSvVDnbhta4TtSGWi84mdDOxU4KAj+xkqcNQBHyP/surTw5bPoubGaQ5hoLUdN6cDd23NTjXciQfu1/VOCXIpfyd80JadNHxrDtTWkKdMzplSMiUXSjnjf63aNycObUPvHWlK5JIZYsLFgh9HhsExeE9nB6xzOO+xw8DgHH4MpGl6vHRG1UhFawwhJUKK5DIhXER5FsLOWrq+RyiF6Xt019FIidR6IZ8Jf+tQyJbd8YAxZknOaFSLVHItNMvB4B3hD0OZ5Qkh4JxbXlPtr7/w/es17e0Nse+YSkEKhTxJ2lpgtV0KlbGY3q40ZcUalUI/nCWomu2W/e09uq5JYSROE5fvX3OxecGTty95drXBxVmrwjBO+FnbCGPkcT3lOZ4YY6FqjaaWci1KxJS4/LDh6dUbnn/ccPHuFf3o107OfeXC8n0Wn8/7vzqv+sEijcb4gTglUkqkMZBnPcNZs2EcGWNAdXoZjhs9PozovsOFc87YfuGpYoqkPDH7mXAWvpYC1RuOollQt+1S0GrFsWk4yXaZfi0EQmtUZ1Dz9JXiJ52sTvJQrtQgAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"mongodb-1\"\n        title=\"\"\n        src=\"/static/3a8ad2fc6c44825ba1ca050587fc4387/f058b/mongodb-1.png\"\n        srcset=\"/static/3a8ad2fc6c44825ba1ca050587fc4387/c26ae/mongodb-1.png 158w,\n/static/3a8ad2fc6c44825ba1ca050587fc4387/6bdcf/mongodb-1.png 315w,\n/static/3a8ad2fc6c44825ba1ca050587fc4387/f058b/mongodb-1.png 630w,\n/static/3a8ad2fc6c44825ba1ca050587fc4387/c0255/mongodb-1.png 920w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>It is necessary to create a database user and give it a role so that you can have an access to the database from an application.</p>\n<p>Click <strong>Database Access</strong> in the left side bar to do it and then, click <strong>ADD NEW DATABASE USER</strong> in the right side of the page.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/eb846077747d9323877832016910ecf5/c4b7c/mongodb-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 81.64556962025317%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACI0lEQVR42pVUiW7rIBD0/39iW+fyxe0LMBjseQInfWkUVepKowWMxzt7uJCqB2UcXEhwIcCFApcSy+KQbN/3b2zblhHv/nmfkKwgjKEjDE1H0BGKuu1QtwSXW41b0+HS0AM1zXfSx+vkuQBhPL/b0QOL8yjSpartcGtatJRB9kOGSn6YIaYAOUf0OiCEFSGEb6whIsaIECLWNeRoi09Wo5IMZdfgs60wB4c5Oiin71I3GGvhvEv6s7QQI/Ztg/Mes9aZ9CG/oG5ExI7ezmiUgA4OJngQ0yPEIxImBIZxyiQpEu/XTKKGIcu3y5LvpbPCrA6zt9BhhY0hrydv4cN6JDxGPOy5QA+8nhfDNGEYRvDRQYwLjNFYrIUxJku1dsnE7+yZ9GEFK0/oyhP4+QJWnrOkHfvbaN5F92qFaTtoY4/E9j22ELDde+43sudU/CCcTmfIpoGsGtiqBlK1Xhr5FakAfl3fE+ppgmAMknMILkCFQD+OYELmtvirFYkgNTRhAi2hsIvDFlOj+uz/j93d79uPlGxPSnKVy9MZH6czyssVH+UJVdPiVteoCMe1k7i2AjWREFJCCAmp1DHzSVHaywOcs9wthe17zG0HQyksZzCMQxOCmQqYwUC7CLOEPF6pEMeohR9rt0YsPuQJKhLZ5fMLLVXQNsLOGs4Y7DFgUyqP22+WntI5gOqYC1X49Os6X6AIh+0nWKWwqB5+GOEp/XNR/gFlCtl81kDgYQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"mongodb-2\"\n        title=\"\"\n        src=\"/static/eb846077747d9323877832016910ecf5/f058b/mongodb-2.png\"\n        srcset=\"/static/eb846077747d9323877832016910ecf5/c26ae/mongodb-2.png 158w,\n/static/eb846077747d9323877832016910ecf5/6bdcf/mongodb-2.png 315w,\n/static/eb846077747d9323877832016910ecf5/f058b/mongodb-2.png 630w,\n/static/eb846077747d9323877832016910ecf5/c4b7c/mongodb-2.png 903w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Enter a username and password. You will need to remember the username and password to use them to connect to the database.</p>\n<p>Next, select <strong>Atlas admin</strong> for the role. You can give another role to the user if you allow the user to write and read or just read.</p>\n<p>Now, go back to the dashboard. Click <em>connect</em> so you will get URI to connect our Node.js API server to the database.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 440px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6e847138a836b8c5c19669a5a558fc2e/48c0e/mongodb-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.59493670886076%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABuklEQVR42o2R65KbMAyFef8n63Sy3ZltkubSXAjYmNy4JiRg++tgYDdN86NmDkJH0jGSvDg3qMwQJpbdubUGmRr2uSU8G4Kki0eZQWaW4GwQqaHRFvdYy+PxTiW0EClsT5YoA5XBvgCZgkhw3CGHOO98mYE2vDzeVK4YizWrfcBcbVjEAZujYHuULOMd02jj7Ez5iESxOYQs1I5ZHDIRPsmldELDf3qrg+Sn8PkVBUxlwDQKGPe+f4p5D9Z8W88c33K/94KRv2QifeYq4FjmvWAn6ZWXK3XTYIxGa02jG7QxWGNoHG8c39p2Xs8z+6fl8nqlqm7UTe1wrzvU9zv3Fu13XaPdRRrTi37iWbB9GWtc4oAhzT5iiD3ktXW2t0PMG1p5LHdJRQF5DkWByTJMXXeXfLbc533W8yW4zBXbs2ZzsCxPcDnmFB8fqMWSaL7gOJ6Qzefs4phdKPCFxA8F0f5AUZYEMiKMFFLFnaC8JgSJZn2w+ClU55x09Ib/453N6A31fUSxWOCrmEBIQhk54VakvF4QKmLb+167wb8317dSVdjbrUNVYbT+v5YHQTdk8zX4V0t5hnnB/QFn954z40ZfHwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"mongodb-3\"\n        title=\"\"\n        src=\"/static/6e847138a836b8c5c19669a5a558fc2e/48c0e/mongodb-3.png\"\n        srcset=\"/static/6e847138a836b8c5c19669a5a558fc2e/c26ae/mongodb-3.png 158w,\n/static/6e847138a836b8c5c19669a5a558fc2e/6bdcf/mongodb-3.png 315w,\n/static/6e847138a836b8c5c19669a5a558fc2e/48c0e/mongodb-3.png 440w\"\n        sizes=\"(max-width: 440px) 100vw, 440px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Click the one below when prompt.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0025ae2a27a14902400eb32cda23fdf0/13e20/mongodb-4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 10.759493670886075%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAb0lEQVR42m2MQQrCMBREe//jeAh3HsCNaNFIaZr8/F/BNAlPmlUXLh7DG5gZTuHCOV6JU+DxcoxPx+0+kmyllELO24Hc85s3amu0A7uXWhnen4ATj4jil8C8BKbZI0lRW0lqiBpRUu+S7a59/O/wBz1ImbZGYKoVAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"mongodb-4\"\n        title=\"\"\n        src=\"/static/0025ae2a27a14902400eb32cda23fdf0/f058b/mongodb-4.png\"\n        srcset=\"/static/0025ae2a27a14902400eb32cda23fdf0/c26ae/mongodb-4.png 158w,\n/static/0025ae2a27a14902400eb32cda23fdf0/6bdcf/mongodb-4.png 315w,\n/static/0025ae2a27a14902400eb32cda23fdf0/f058b/mongodb-4.png 630w,\n/static/0025ae2a27a14902400eb32cda23fdf0/13e20/mongodb-4.png 741w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7a7afdf2faffeb26bfe1b80c0e13a6f5/6c2f2/mongodb-5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.25316455696203%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB0UlEQVR42p2T6W7bMBCE9f5P1wNF0382ItuSTPHQwVPUV5A2kiBO06ILDJeExD1mh03eM2vy2BSwMWCTx6VAylv1LsX6rezLf3Hb8D4QYmTf9wc0cUtc/cTwAsMY5hqgt5rBTXRW0zvDeVUswSGlwkwzH1lzOB5p2zNSaoSQjFIhxEjed/7Hmpgix/ZUA4UQ8N4zTTPPpwvzurJtGyml6uPdc2/vw4BlmealtpBzrpdjCChjmOb5FjDGmsw5V/2nFR4OR07nC0ob+qtgECPDODIqTTcMnPuB6yh5X9DOHyoMIaKUQSpdMY6S/tIhhby1mjN5y//OYVn0NHE4nej7gfXbd/zTL8KXr+gfP+mN4Sol3fXKqe8RStUOeiHoR8moNWnbcN5XOm4cLgtt12HMhO86YtcR2hYnRNWhDx5b4B0+BlzwFT56QgyEFCsK303hwlqHsgutVahgsT6weM/q3W1IRfDWVqzWsqwrq3XodUcsOyG98tlY5+qE66SXBa0NZolMNqPXjLE72hafUWsmbjfJ5Aoq3g6sKRX4qr/wokOfSlZw8RX+fs5/mU+T79kehbrf8fbMh++33C/8FR030zLzfLngQ/wkzOP+vQ1CUGL9BlV8RODn/72DAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"mongodb-5\"\n        title=\"\"\n        src=\"/static/7a7afdf2faffeb26bfe1b80c0e13a6f5/f058b/mongodb-5.png\"\n        srcset=\"/static/7a7afdf2faffeb26bfe1b80c0e13a6f5/c26ae/mongodb-5.png 158w,\n/static/7a7afdf2faffeb26bfe1b80c0e13a6f5/6bdcf/mongodb-5.png 315w,\n/static/7a7afdf2faffeb26bfe1b80c0e13a6f5/f058b/mongodb-5.png 630w,\n/static/7a7afdf2faffeb26bfe1b80c0e13a6f5/6c2f2/mongodb-5.png 767w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>This is the URI that we want to have - <em>You do not have to care about driver option because we will build a Node.js API</em>. Make sure you put <em>[your username:your password]</em> you created in the previous step in the red blank. You do not have to check include full driver code example because I will cover that in this post. Let’s move on.</p>\n<h2>Create A Project Folder And Initialize A Node.js API server</h2>\n<p>Create a new project folder and go to the directory. After that, open the terminal and enter the command as shown below. It will create a package.json in which you manage the information and dependencies of the application. Then, create <code class=\"language-text\">app.ts</code> file under the project folder.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">cd [project folder directory]\nnpm init -y</code></pre></div>\n<h2>Install Dependencies For Development</h2>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">npm install <span class=\"token operator\">-</span>g typescript\nnpm install express ts<span class=\"token operator\">-</span>node dotenv nodemon mongodb\nnpm install <span class=\"token operator\">--</span>save<span class=\"token operator\">-</span>dev cross<span class=\"token operator\">-</span>env @types<span class=\"token operator\">/</span>node @types<span class=\"token operator\">/</span>express</code></pre></div>\n<blockquote>\n<p><strong>Express</strong> <em>is a minimal and flexible Node.js web application framework that provides a robust set of features for web and mobile applications. So, Express is the core of the API we will be creating.</em></p>\n<p><strong>Dotenv</strong> <em>is a zero-dependency module that loads environment variables from a .env file into process.env. We will talk more about Dotenv later in this post.</em></p>\n<p><strong>Nodemon</strong> <em>is a tool that helps develop Node.js based applications by automatically restarting the node application when file changes in the directory are detected. Nodemon is meant to be for development, not for production. It is very useful because you do not have to kill and restart the application while developing it.</em></p>\n<p><strong>Typescript</strong> <em>adds additional syntax to JavaScript to support <strong>a tighter integration with your editor</strong>. Catch errors early in your editor.</em></p>\n<p><strong>Ts-node</strong> <em>is a TypeScript execution engine. You can’t execute Typescript. It needs to transpile to Javascript. Ts-node enables us to transform the ts.file to js. file and execute the js.file at once.</em></p>\n<p><strong>MongoDB</strong> <em>is the official <a href=\"https://www.mongodb.com/\">MongoDB</a> driver for Node.js.</em></p>\n</blockquote>\n<h2>Configure Typescript</h2>\n<p>Since typescript support to a strong type checking, potential errors can be easily caught in your editor.</p>\n<p>Create tsconfig.json under the project directory and configure typescript. Then, copy and paste the codes shown below.</p>\n<p>You can change a few of fields under <strong>compilerOptions</strong> depending on your needs. I won’t go into the detail of the options so, check the official <a href=\"https://www.typescriptlang.org/docs/handbook/tsconfig-json.html\">website</a> if you want to know more about it.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">\"buildOnSave\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"compileOnSave\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"compilerOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string-property property\">\"charset\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"utf8\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-property property\">\"module\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"commonjs\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-property property\">\"target\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"es2018\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-property property\">\"lib\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token string\">\"es2018\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"dom\"</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-property property\">\"noImplicitAny\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-property property\">\"removeComments\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-property property\">\"strictNullChecks\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// \"noImplicitThis\": true,</span>\n        <span class=\"token string-property property\">\"noImplicitThis\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-property property\">\"alwaysStrict\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-property property\">\"preserveConstEnums\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-property property\">\"sourceMap\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// \"esModuleInterop\": true,</span>\n        <span class=\"token string-property property\">\"esModuleInterop\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-property property\">\"noImplicitReturns\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-property property\">\"allowJs\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"include\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">\"src\"</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"exclude\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"node_modules\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"reference_deprecated\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"dist\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"scripts\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"typeRoots\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">\"node_modules/@types\"</span>\n    <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>Modify Scripts in package.json</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 587px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f6a56c7b7eecf5b00c935aa498ef8b1f/d72eb/package-json.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 17.088607594936708%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAnUlEQVR42i2OS27DMAwFfRI50YekRKl26hZxlrn/oSaI4MWAfMAjOEttg+N8032wt4rkSNeC5kgtiSp50q3gmnEtM6d4J4TAuq6sIXC75lLU2I4XpsLDja0pf73y3HzyPxrn3jl65dwHv26MquzN6CY0KddDIaXI0lunjQcpC5oTboX2LajgJowqDJN54KbTUkvipyo53qfh7eK7fwCXo1fQ9VJdDwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"package-json\"\n        title=\"\"\n        src=\"/static/f6a56c7b7eecf5b00c935aa498ef8b1f/d72eb/package-json.png\"\n        srcset=\"/static/f6a56c7b7eecf5b00c935aa498ef8b1f/c26ae/package-json.png 158w,\n/static/f6a56c7b7eecf5b00c935aa498ef8b1f/6bdcf/package-json.png 315w,\n/static/f6a56c7b7eecf5b00c935aa498ef8b1f/d72eb/package-json.png 587w\"\n        sizes=\"(max-width: 587px) 100vw, 587px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Let’s add two commands under scripts in package.json. You can assign a complicated command to one of those keys and then, simply run the command by entering <code class=\"language-text\">npm run [key name]</code>.</p>\n<p>You can run the application by entering <code class=\"language-text\">npm run dev</code> which actually executes <code class=\"language-text\">cross-env NODE-ENV=development nodemon --exec ts-node ./`app.ts</code>. When file changes occur, the application will be restarted automatically thanks to nodemon. The script, <strong>start</strong> is for when you run the application in production.</p>\n<h2>Start Express Server</h2>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> express<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Request<span class=\"token punctuation\">,</span> Response<span class=\"token punctuation\">,</span> NextFunction <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'express'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token function\">express</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>express<span class=\"token punctuation\">.</span><span class=\"token function\">urlencoded</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">extended</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>express<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// to parse json of body object</span>\n\n<span class=\"token comment\">// get route -> path '/'</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>req<span class=\"token operator\">:</span> Request<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">res</span><span class=\"token operator\">:</span> Response<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token parameter\"><span class=\"token keyword\">void</span></span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    res<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Here is the response\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token number\">4000</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Server is running on 4000\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>After copying and pasting the code in <code class=\"language-text\">app.ts</code>, enter <code class=\"language-text\">npm run dev</code> as mentioned above to start the server. You can see the terminal saying:</p>\n<p><em>the server is listening to the port 4000</em>.</p>\n<p>Each of the routes represents a URL that API users make a request to. Here, you will have a get route and then, pass '/' as its path and a call back function. What happens in the route is that when the API users make a request to the URL of this API, they will get a response showing <em><strong>Here is the response</strong></em>. Open a browser and enter <a href=\"http://localhost:4000\">http://localhost:4000</a> to see the response - <em>Since we develop in our own local computer, we can have an access to the API with localhost</em>.</p>\n<p>The call back function takes mainly 2 objects as its arguments. They are Request and Response object.</p>\n<p>Request object is like a set of information that the server receives from API users. API developers can make a certain rule about how the request object looks for the API. For example, it could have a few of data required to be sent to the API such as API key.</p>\n<p>Response object is what the API users will get from the API route. It can be a set of data such as users or billing depending on what the purpose of the API and the route is.</p>\n<h2>Set Environment Variables</h2>\n<p>It is conventional to write environment variables in capital letters.</p>\n<p>Create <strong>development.env</strong> and <strong>production.env</strong> files under the project directory. In both files, write the variable names as shown below.</p>\n<p>Then, assign the mongodb uri that we have gotten in the section above to <strong>MONGODB_URI</strong>.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token constant\">PORT</span><span class=\"token operator\">=</span><span class=\"token number\">4000</span>\n\n<span class=\"token constant\">MONGO_URI</span><span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>your mongodb uri<span class=\"token punctuation\">]</span>\n<span class=\"token constant\">MONGO_DB</span><span class=\"token operator\">=</span>test<span class=\"token operator\">-</span>db <span class=\"token comment\">// just name whatever you want for development</span>\n<span class=\"token constant\">MONGO_COLLECTION</span><span class=\"token operator\">=</span>test<span class=\"token operator\">-</span>collection <span class=\"token comment\">// just name whatever you want for development</span></code></pre></div>\n<h2>Set Up Configuration By Environments</h2>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> dotenv <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'dotenv'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> envFound <span class=\"token operator\">=</span> dotenv<span class=\"token punctuation\">.</span><span class=\"token function\">config</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.env</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>envFound<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Could not find any .env file.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> config <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">port</span><span class=\"token operator\">:</span> <span class=\"token function\">parseInt</span><span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">PORT</span><span class=\"token operator\">!</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">mongodb</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">uri</span><span class=\"token operator\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">MONGO_URI</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">db</span><span class=\"token operator\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">MONGO_DB</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">collection</span><span class=\"token operator\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">MONGO_COLLECTION</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> config<span class=\"token punctuation\">;</span></code></pre></div>\n<p>When you develop an application, it is required to test the application so many times before the production. Therefore, you need to set up an environment for testing as well as an environment for production.</p>\n<p>cross-env allows you to set the environment by putting <code class=\"language-text\">cross-env NODE_ENV=production</code> in front of the command to run the application. Then, it can access to a different .env files that you have created so you can create the same code that has two or more different environments.</p>\n<p>Create a file named <code class=\"language-text\">config.ts</code> under the project directory and import dotenv to enable us to access to <strong>[process.env.NODE_ENV].env</strong> file. If you set development to NODE_ENV in the command, Dotenv will read variables from development.env here.</p>\n<p>Notice that process.env is preceded by the environment variables. You can access to the object globally in Node.js. In other words, you can use it throughout a whole application.</p>\n<h2>Access MongoDB From The Application</h2>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> config <span class=\"token keyword\">from</span> <span class=\"token string\">'./config'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> MongoClient <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'mongodb'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">connectMongoDB</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Promise<span class=\"token operator\">&lt;</span>any<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    MongoClient<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>\n      config<span class=\"token punctuation\">.</span>mongodb<span class=\"token punctuation\">.</span>uri<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">useUnifiedTopology</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">useNewUrlParser</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token literal-property property\">err</span><span class=\"token operator\">:</span> Error<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">client</span><span class=\"token operator\">:</span> object</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    \n        <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>client<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> connectMongoDB<span class=\"token punctuation\">;</span></code></pre></div>\n<p>Create a file named <code class=\"language-text\">db.ts</code> under the project directory. Then, import MongoClient and also config object from <code class=\"language-text\">config.ts</code> and pass <em>config.mongodb.uri</em> you have assigned to connect the application to MongoDB database.</p>\n<p>Finally, wrap it in the promise so you can connect the application to MongoDB asynchronously through the whole application. Then, we will edit the code to make a test request to the API.</p>\n<h2>Create A Test User in MongoDB</h2>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> express<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Request<span class=\"token punctuation\">,</span> Response<span class=\"token punctuation\">,</span> NextFunction <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"express\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> config <span class=\"token keyword\">from</span> <span class=\"token string\">\"./config\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> connectMongoDB <span class=\"token keyword\">from</span> <span class=\"token string\">\"./db\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token function\">express</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>express<span class=\"token punctuation\">.</span><span class=\"token function\">urlencoded</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">extended</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>express<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>req<span class=\"token operator\">:</span> Request<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">res</span><span class=\"token operator\">:</span> Response<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token parameter\"><span class=\"token keyword\">void</span></span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    res<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Here is the response\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span>req<span class=\"token operator\">:</span> Request<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">res</span><span class=\"token operator\">:</span> Response<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Promise<span class=\"token operator\">&lt;</span><span class=\"token keyword\">void</span><span class=\"token operator\">></span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> firstName <span class=\"token operator\">=</span> req<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>firstName<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> lastName <span class=\"token operator\">=</span> req<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>lastName<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> client <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">connectMongoDB</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> db <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">db</span><span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">.</span>mongodb<span class=\"token punctuation\">.</span>db<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> collection <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> db<span class=\"token punctuation\">.</span><span class=\"token function\">collection</span><span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">.</span>mongodb<span class=\"token punctuation\">.</span>collection<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">await</span> collection<span class=\"token punctuation\">.</span><span class=\"token function\">insertOne</span><span class=\"token punctuation\">(</span>\n       <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">firstName</span><span class=\"token operator\">:</span> firstName<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">lastName</span><span class=\"token operator\">:</span> lastName\n       <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n    res<span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Successfully Created in DB\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    res<span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Error Occured in Server\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;POST> '/' error occured\"</span><span class=\"token punctuation\">,</span> err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">.</span>port<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Server is running on\"</span><span class=\"token punctuation\">,</span> config<span class=\"token punctuation\">.</span>port<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Add a post route that will receive a first name and a last name from the API users and will insert the information to the database. These data can be accessed by the property of request object called body.</p>\n<p>Assign what the MongoDB promise resolves to a variable named connection — <em>Notice that the database name and collection name you set in <code class=\"language-text\">config.ts</code> are passed</em> — and we will insert the first name and last name by the method called <strong>insertOne</strong>.</p>\n<p>If there is no error that is caught, the post route will send the status code which is 200 and the string saying <em><strong>Successfully Created in DB</strong></em> to the API users.</p>\n<h2>Make A Post Request With Insomnia</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 548px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/21f9724b06b007f1b24f728d04bfc897/a58fe/insomnia-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.21518987341771%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAACMUlEQVR42p2TXW/SUBjH+0nkZS10UF7KaBNHZC9w74VX84aR4C5mMr+A34O3AdHEmH2BabwQMNFrNV5hcBJBI2EFWmAKtH/zHMZkiTrmSX7paXOeX5+e/g/37ZMO7VTDcDDE0BjA0A2Y0yksyzrHhGVaWHZwTwvHKOWfIH+YQzaTQT6XQy6bRTqdRrFYRKFwiEwmw+alUulKuDvqQ2wqtyF6BIiiiNXVVfj8fng8XqiKirVQCALPw263LwV3M6JiIxrF1uYW1iPr8Pv9kGUZse1thMNhSJIEl8v1VwRBuAQXDAZBkIggQSAQQICeyzLrlhdc4KngXMDzPIPmbrf7EhwVk8jn8zFISB2SMBaLYSMSQViWoYbW2JW6VhQFqqqydfNtmsNJXgkMaQZJ3aKI6K0oXj16jA/PX+D98TPGx5dlnLx+g1qthlarhaOjIzgcDni93gWh9Ft2IXS72R5+efsOP7+3MWp9xajZwqTdhtXtYTqdsohUKhX2I5YXNpvoGQY6vR60fh89XYdpmphMJtcXxuNxfD45QVfT0O12cdrp4MfZGSzTvOiwWq1eT9hoNKDrOhP2+31omobRaPR/n0zCer0OwzAwGAwwHA7ZURyPx+yeRrlcvlpI0AKKRCKRQCqVwu7uLpLJJOPe3h7u7+/jwcEB7u7ssJdfjs0fhHPpysoKg7qw2Wy4YbPB6XTOwi3wLIOL3f1TSFDgKfhURHg8HgQDQRbssDILOG3RYrh/Aammi6h0HbUIAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"insomnia-1\"\n        title=\"\"\n        src=\"/static/21f9724b06b007f1b24f728d04bfc897/a58fe/insomnia-1.png\"\n        srcset=\"/static/21f9724b06b007f1b24f728d04bfc897/c26ae/insomnia-1.png 158w,\n/static/21f9724b06b007f1b24f728d04bfc897/6bdcf/insomnia-1.png 315w,\n/static/21f9724b06b007f1b24f728d04bfc897/a58fe/insomnia-1.png 548w\"\n        sizes=\"(max-width: 548px) 100vw, 548px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Insomnia is open source API client. You can test your API and design it with Insomnia. We will make a post request to the post route of the API we just have created the above. Once you downloaded Insomnia, click the plus button to create a HTTP Request as shown above.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 475px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d0c4c2e2644da1b0f59ab116f99b73ec/466da/insomnia-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.202531645569614%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABVUlEQVR42pVQO07DQBDdW1AQeZMQ4v2vvXbASiBOHCJEg0RBR0WJFC5AS8EBuAAFh+Ea9JzhoR3FUYKCEMXTzM68nXlvmHQ9CHOE3GeoTk6R5zlCnmNcjVGGAglP0O12wXmChHNwzund6/Vx2DnA49073l6+8Pr0iefVB5hSEtpoKKmgtYa1lmJ8G22glEKaprDGwTsPawyEEFQfpsdoJre4uVzhevmAq/k9mPceo3JEBCkliqKA9w5CSIQQMCpLqo+rCeb1DGVR0sKiCPA+w2DYRX/QIQyGHCw2W2XOOcrjgHZBm0dogt7iSGhtSL2zniLLsoxUzeoa07Nz1PV08yFCpCkiZ7m4QFPPsGgaVFVFtqkvBAmJyqMz5uguFsaYDVpFG2VrB/aXfrtcKgmWh0AbWst2z4cIt3UStXWGnYFSggmRruULiq2Vn2g5+3o7A/8i/BffzT8Vx6Q2BywAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"insomnia-1\"\n        title=\"\"\n        src=\"/static/d0c4c2e2644da1b0f59ab116f99b73ec/466da/insomnia-2.png\"\n        srcset=\"/static/d0c4c2e2644da1b0f59ab116f99b73ec/c26ae/insomnia-2.png 158w,\n/static/d0c4c2e2644da1b0f59ab116f99b73ec/6bdcf/insomnia-2.png 315w,\n/static/d0c4c2e2644da1b0f59ab116f99b73ec/466da/insomnia-2.png 475w\"\n        sizes=\"(max-width: 475px) 100vw, 475px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Set content-type to application/json in the headers to send the data to the API server so, you can send some data stored in body object to the API server.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 474px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/99d9d57ec0466b20709cd661b263fc9b/5595f/insomnia-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.911392405063296%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABMUlEQVR42pWPPU7DMACFcw+kQpofO7YTN05S0hYiKoZKjAyA1JGlYi0cgL0XqNg4E1yAi3zIriqxMHT45Pcs+fm9SJY51jnarqOua5zXbct8PifPc+I4ZjwekyRJwOuDTxmdn7F5/GD//sPu7Yvd6zdRLRKmsmDqHNoYyrKkqqoQnqZpeHw8PVmWBe8DL+IR96st2+dPXtZ7Nk97ooflLWtbMwhB1TY4VyOlRCtN3/dYa9H6oD1N01AURVjhP81FRpYlZHlKLlKiZWW5qyyNUMjCoJVBSIWUOjT1YUqpoP96v8QYg9YKrU2490RSKWSpcTNFf6Pprg19X7JYVAghQ1uPECJw9P8RTaylcTWzwTKsJlxeTVguHcMwQSkTWpxC5Gd0XYcxJUZ7fP0yzPCzTuUXKh/cdtExTqoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"insomnia-1\"\n        title=\"\"\n        src=\"/static/99d9d57ec0466b20709cd661b263fc9b/5595f/insomnia-3.png\"\n        srcset=\"/static/99d9d57ec0466b20709cd661b263fc9b/c26ae/insomnia-3.png 158w,\n/static/99d9d57ec0466b20709cd661b263fc9b/6bdcf/insomnia-3.png 315w,\n/static/99d9d57ec0466b20709cd661b263fc9b/5595f/insomnia-3.png 474w\"\n        sizes=\"(max-width: 474px) 100vw, 474px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>After setting the data type to JSON and write the object that has first name and last name, enter Send on the right and check out the response as shown below.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 364px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7297d056ce9e0ca2da867cc47b51918b/e45a9/insomnia-4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.645569620253163%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABR0lEQVR42o2NS2rCYBRGsxSN1mjeiYLR+khCtaB2LZ05KXTQDXTSQTvqoBsRBFMfQyHRJSgqihNHp+QvhY5KLxz4vsPlXql8XeDxvcfTxx3DN59yrUjdaxCGAaZp4Lgu3U4X13XJyjK5XO5PJMfLM3y55eF1wP1zE9f7Phj4PrquY1k2nZsOruOQyWTIZrPIP4dlWfTfTtJUHUt3MDUbVTEoFUsUCgVUVcUyTSzLQtM08ld5DMPAcRxM00RRFOHTnqKpKkqxiFT1PPq9PoN+nyAIqFQqAt/3CcOQRqNBrVbDtm2q1Srtdpv6dV08SvdazSatZkvk1Emz2YzJZEL0GTEej5lOp8znc6IoEiwWC0ajEcvlkvV6TRzHJKtE5NVqRZIkJHEscuqk8/nM4XAQbDYb9vs9p9OJ7XbLbrfjeDwKf7lc+M98AXKyE13dIuIlAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"insomnia-1\"\n        title=\"\"\n        src=\"/static/7297d056ce9e0ca2da867cc47b51918b/e45a9/insomnia-4.png\"\n        srcset=\"/static/7297d056ce9e0ca2da867cc47b51918b/c26ae/insomnia-4.png 158w,\n/static/7297d056ce9e0ca2da867cc47b51918b/6bdcf/insomnia-4.png 315w,\n/static/7297d056ce9e0ca2da867cc47b51918b/e45a9/insomnia-4.png 364w\"\n        sizes=\"(max-width: 364px) 100vw, 364px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Check out to see if there is a document created in your MongoDB. It should look like:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2e3f18a7711812153d456cc8711d9d52/d67fd/result.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.9620253164557%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABUUlEQVR42p2S625bIQyAef/Hm7KpbapKnc7SZMnOhbu5nG+Ck6rZjy5SLX0YGwPGWBnreNi/8P3pmR9Pe15+Duwen9k97vl1PLHWSsqZlBIxCqWUboukTpTN9y4ql8LodF/QxhBjJKWMdZ550d23aMOsNT4EnPeM89x9IQrjNGOs7ftTLaiQhUvQrOuKcQ7nA3WtPajZTWtr+wUtpulpWQgxdrvFt/V2oUuyZdgOiElIJZNK6nPp8w8kp5uYD7vpW5/6M40c3g5ISgSRLfWboHdyp3xqbxTU6feJYRiw7YlGo7XGOosP/kuonnLOvSZBYn+Gj+HLKG0Ni9EYZzhPE69vR0JOSC3/cq3RPVSrReuj/jlZKNGxSqBGTw2OGq80X90+8H+oNjQZTmcedt+YDgN+vIC+wHKG+YqZoFbuiWq91GTWhtfDkcULId/f+NmBfwEa9lkFn39wWwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"result\"\n        title=\"\"\n        src=\"/static/2e3f18a7711812153d456cc8711d9d52/f058b/result.png\"\n        srcset=\"/static/2e3f18a7711812153d456cc8711d9d52/c26ae/result.png 158w,\n/static/2e3f18a7711812153d456cc8711d9d52/6bdcf/result.png 315w,\n/static/2e3f18a7711812153d456cc8711d9d52/f058b/result.png 630w,\n/static/2e3f18a7711812153d456cc8711d9d52/d67fd/result.png 670w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>You have just created a new user in your database!</p>\n<h2>Conclusion</h2>\n<p>API server can become bigger and more complicated depending on the purpose of the API you develop. To have a better coding skill to create and handle it, I think that you should develop various projects by yourself. For example, it could be achieved as you add some more routes, define more types for variables with Typescript or try another database. I hope you can make this simple API a better version of it by yourself!</p>\n<p>Feel free to check out the entire code on my github <a href=\"https://github.com/shkim04/express_typescript_simple_api\">repository</a>.</p>\n<p><em><strong>THANKS FOR READING. SEE YOU NEXT TIME!</strong></em></p>\n<p><em>This is originally posted on my <a href=\"https://medium.com/@shkim04/node-js-how-to-create-a-simple-rest-api-with-express-mongodb-and-typescript-54b1d801d073\">Medium</a>.</em>\n<em>Let's connect!</em></p>","frontmatter":{"title":"REST API with Express, MongoDB and Typescript","date":"01 Dec, 2022","description":"","tag":["NodeJS","Database"]},"fields":{"locale":"en"}},"previous":{"fields":{"slug":"/en/how-to-create-react-native-modal-with-expo"},"frontmatter":{"title":"How To Create React Native Modal With Expo"}},"next":{"fields":{"slug":"/en/how-to-launch-aws-ec2-and-download-node"},"frontmatter":{"title":"How To Launch AWS EC2 Instance And Download Node"}}},"pageContext":{"locale":"en","isDefaultLang":false,"slug":"/en/restapi-with-express-mongodb-typescript","titleByLang":{"ko":"express-mongodb-typescript로-restapi-개발하기","en":"restapi-with-express-mongodb-typescript"},"dateFormat":"DD MMM, YYYY","id":"1e31fa77-0f0d-5970-87e3-a3e82b6d21df","previousPostId":"fdb7e924-420c-59b3-bebc-f69b6f736096","nextPostId":"0bdb2c12-ed46-5ece-9b2a-41d13dfb164e"}},"staticQueryHashes":[],"slicesMap":{}}