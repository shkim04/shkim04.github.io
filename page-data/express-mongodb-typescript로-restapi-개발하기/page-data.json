{"componentChunkName":"component---src-templates-blog-post-js","path":"/express-mongodb-typescript로-restapi-개발하기/","result":{"data":{"site":{"siteMetadata":{"title":"Seunghyun's Blog"}},"markdownRemark":{"id":"3b00f57e-84a9-5e8d-bb8d-5a5a8eaaf2af","excerpt":"REST API는 마치 음식점의 메뉴와 같다. 손님이 메뉴를 보면 그 음식점이 어떤 음식들을 요리하는지 알 수 있는 것처럼 개발자가 한 소프트웨어 상품의 API 문서를 보면 무슨 기능을 제공하는지 알 수 있다. API 문서에는 흔히 요청 url이 적혀 있고 각 url…","html":"<p>REST API는 마치 음식점의 메뉴와 같다. 손님이 메뉴를 보면 그 음식점이 어떤 음식들을 요리하는지 알 수 있는 것처럼 개발자가 한 소프트웨어 상품의 API 문서를 보면 무슨 기능을 제공하는지 알 수 있다. API 문서에는 흔히 요청 url이 적혀 있고 각 url에 대한 설명을 찾아볼 수 있다. 이 중 한 url에 요청을 보내면 그에 대한 응답을 받는 것이다. 개발자는 이 응답을 받아 가공 후 자신의 앱에 사용하면 된다. 이제 API를 만들어 보자.</p>\n<h2>필수</h2>\n<ul>\n<li>Node.js + Typescript</li>\n<li>MongoDB</li>\n<li>Insomnia</li>\n</ul>\n<h2>MongoDB 데이터베이스</h2>\n<p>먼저 MongoDB 설정부터 시작하겠다. MongoDB는 NoSQL 데이터베이스로 아주 많이 사용되는 데이터베이스 중 하나이다. 흔히 CRUD라고 말하는 create, retrieve, update, delete 요청을 적용하는 것이 아주 용이하다.</p>\n<p>MongoDB 사용을 위해서 계정을 만들어야 한다. google이나 github 계정과 연동해서 쉽게 만들 수 있다. 계정을 생성해도 먼저 돈을 지불하지 않으며 추후에 큰 규모의 데이터를 처리할 때 처리량에 따라 지불하면 된다.</p>\n<p>계정을 생성하고 로그인을 하면 다음과 같은 대시보드가 나온다:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3a8ad2fc6c44825ba1ca050587fc4387/c0255/mongodb-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.69620253164557%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB3UlEQVR42o2SS4sVMRCF+/+vBwQXoz9BdKFwXehi0IU7cQSReXhf07fTeXSnk07SySfdtx0QRC04VCqVOqmcSvVDnbhta4TtSGWi84mdDOxU4KAj+xkqcNQBHyP/surTw5bPoubGaQ5hoLUdN6cDd23NTjXciQfu1/VOCXIpfyd80JadNHxrDtTWkKdMzplSMiUXSjnjf63aNycObUPvHWlK5JIZYsLFgh9HhsExeE9nB6xzOO+xw8DgHH4MpGl6vHRG1UhFawwhJUKK5DIhXER5FsLOWrq+RyiF6Xt019FIidR6IZ8Jf+tQyJbd8YAxZknOaFSLVHItNMvB4B3hD0OZ5Qkh4JxbXlPtr7/w/es17e0Nse+YSkEKhTxJ2lpgtV0KlbGY3q40ZcUalUI/nCWomu2W/e09uq5JYSROE5fvX3OxecGTty95drXBxVmrwjBO+FnbCGPkcT3lOZ4YY6FqjaaWci1KxJS4/LDh6dUbnn/ccPHuFf3o107OfeXC8n0Wn8/7vzqv+sEijcb4gTglUkqkMZBnPcNZs2EcGWNAdXoZjhs9PozovsOFc87YfuGpYoqkPDH7mXAWvpYC1RuOollQt+1S0GrFsWk4yXaZfi0EQmtUZ1Dz9JXiJ52sTvJQrtQgAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"mongodb-1\"\n        title=\"\"\n        src=\"/static/3a8ad2fc6c44825ba1ca050587fc4387/f058b/mongodb-1.png\"\n        srcset=\"/static/3a8ad2fc6c44825ba1ca050587fc4387/c26ae/mongodb-1.png 158w,\n/static/3a8ad2fc6c44825ba1ca050587fc4387/6bdcf/mongodb-1.png 315w,\n/static/3a8ad2fc6c44825ba1ca050587fc4387/f058b/mongodb-1.png 630w,\n/static/3a8ad2fc6c44825ba1ca050587fc4387/c0255/mongodb-1.png 920w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>개발하려고 하는 앱이 데이터베이스에 접근하게 하려면 데이터베이스 사용자를 생성하고 역할을 주어야 한다.</p>\n<p>좌측 사이드바에 있는 <strong>Database Access</strong> 누르고 넘어간 페이지의 우측에 보이는 <strong>ADD NEW DATABASE USER</strong> 클릭한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/eb846077747d9323877832016910ecf5/c4b7c/mongodb-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 81.64556962025317%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACI0lEQVR42pVUiW7rIBD0/39iW+fyxe0LMBjseQInfWkUVepKowWMxzt7uJCqB2UcXEhwIcCFApcSy+KQbN/3b2zblhHv/nmfkKwgjKEjDE1H0BGKuu1QtwSXW41b0+HS0AM1zXfSx+vkuQBhPL/b0QOL8yjSpartcGtatJRB9kOGSn6YIaYAOUf0OiCEFSGEb6whIsaIECLWNeRoi09Wo5IMZdfgs60wB4c5Oiin71I3GGvhvEv6s7QQI/Ztg/Mes9aZ9CG/oG5ExI7ezmiUgA4OJngQ0yPEIxImBIZxyiQpEu/XTKKGIcu3y5LvpbPCrA6zt9BhhY0hrydv4cN6JDxGPOy5QA+8nhfDNGEYRvDRQYwLjNFYrIUxJku1dsnE7+yZ9GEFK0/oyhP4+QJWnrOkHfvbaN5F92qFaTtoY4/E9j22ELDde+43sudU/CCcTmfIpoGsGtiqBlK1Xhr5FakAfl3fE+ppgmAMknMILkCFQD+OYELmtvirFYkgNTRhAi2hsIvDFlOj+uz/j93d79uPlGxPSnKVy9MZH6czyssVH+UJVdPiVteoCMe1k7i2AjWREFJCCAmp1DHzSVHaywOcs9wthe17zG0HQyksZzCMQxOCmQqYwUC7CLOEPF6pEMeohR9rt0YsPuQJKhLZ5fMLLVXQNsLOGs4Y7DFgUyqP22+WntI5gOqYC1X49Os6X6AIh+0nWKWwqB5+GOEp/XNR/gFlCtl81kDgYQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"mongodb-2\"\n        title=\"\"\n        src=\"/static/eb846077747d9323877832016910ecf5/f058b/mongodb-2.png\"\n        srcset=\"/static/eb846077747d9323877832016910ecf5/c26ae/mongodb-2.png 158w,\n/static/eb846077747d9323877832016910ecf5/6bdcf/mongodb-2.png 315w,\n/static/eb846077747d9323877832016910ecf5/f058b/mongodb-2.png 630w,\n/static/eb846077747d9323877832016910ecf5/c4b7c/mongodb-2.png 903w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>사용자 이름과 비밀번호를 입력한다. 데이터베이스에 연결할 때 이 두 정보가 필요하니 꼭 기억해두어야 한다.</p>\n<p>다음 해당 사용자에 <strong>Atlas admin</strong> 역할을 부여한다. 만약 단순히 읽기 역할만 주고 싶거나 읽기/쓰기 역할만 주고 싶을 때는 그에 맞게 권한을 부여하면 된다.</p>\n<p>다시 대시보드로 페이지를 이동하고 <em>connect</em> 를 클릭하면 개발할 API에 사용될 URI를 얻어야 한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 440px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6e847138a836b8c5c19669a5a558fc2e/48c0e/mongodb-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.59493670886076%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABuklEQVR42o2R65KbMAyFef8n63Sy3ZltkubSXAjYmNy4JiRg++tgYDdN86NmDkJH0jGSvDg3qMwQJpbdubUGmRr2uSU8G4Kki0eZQWaW4GwQqaHRFvdYy+PxTiW0EClsT5YoA5XBvgCZgkhw3CGHOO98mYE2vDzeVK4YizWrfcBcbVjEAZujYHuULOMd02jj7Ez5iESxOYQs1I5ZHDIRPsmldELDf3qrg+Sn8PkVBUxlwDQKGPe+f4p5D9Z8W88c33K/94KRv2QifeYq4FjmvWAn6ZWXK3XTYIxGa02jG7QxWGNoHG8c39p2Xs8z+6fl8nqlqm7UTe1wrzvU9zv3Fu13XaPdRRrTi37iWbB9GWtc4oAhzT5iiD3ktXW2t0PMG1p5LHdJRQF5DkWByTJMXXeXfLbc533W8yW4zBXbs2ZzsCxPcDnmFB8fqMWSaL7gOJ6Qzefs4phdKPCFxA8F0f5AUZYEMiKMFFLFnaC8JgSJZn2w+ClU55x09Ib/453N6A31fUSxWOCrmEBIQhk54VakvF4QKmLb+167wb8317dSVdjbrUNVYbT+v5YHQTdk8zX4V0t5hnnB/QFn954z40ZfHwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"mongodb-3\"\n        title=\"\"\n        src=\"/static/6e847138a836b8c5c19669a5a558fc2e/48c0e/mongodb-3.png\"\n        srcset=\"/static/6e847138a836b8c5c19669a5a558fc2e/c26ae/mongodb-3.png 158w,\n/static/6e847138a836b8c5c19669a5a558fc2e/6bdcf/mongodb-3.png 315w,\n/static/6e847138a836b8c5c19669a5a558fc2e/48c0e/mongodb-3.png 440w\"\n        sizes=\"(max-width: 440px) 100vw, 440px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>다음과 같은 버튼을 클릭한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0025ae2a27a14902400eb32cda23fdf0/13e20/mongodb-4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 10.759493670886075%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAb0lEQVR42m2MQQrCMBREe//jeAh3HsCNaNFIaZr8/F/BNAlPmlUXLh7DG5gZTuHCOV6JU+DxcoxPx+0+kmyllELO24Hc85s3amu0A7uXWhnen4ATj4jil8C8BKbZI0lRW0lqiBpRUu+S7a59/O/wBz1ImbZGYKoVAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"mongodb-4\"\n        title=\"\"\n        src=\"/static/0025ae2a27a14902400eb32cda23fdf0/f058b/mongodb-4.png\"\n        srcset=\"/static/0025ae2a27a14902400eb32cda23fdf0/c26ae/mongodb-4.png 158w,\n/static/0025ae2a27a14902400eb32cda23fdf0/6bdcf/mongodb-4.png 315w,\n/static/0025ae2a27a14902400eb32cda23fdf0/f058b/mongodb-4.png 630w,\n/static/0025ae2a27a14902400eb32cda23fdf0/13e20/mongodb-4.png 741w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7a7afdf2faffeb26bfe1b80c0e13a6f5/6c2f2/mongodb-5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.25316455696203%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB0UlEQVR42p2T6W7bMBCE9f5P1wNF0382ItuSTPHQwVPUV5A2kiBO06ILDJeExD1mh03eM2vy2BSwMWCTx6VAylv1LsX6rezLf3Hb8D4QYmTf9wc0cUtc/cTwAsMY5hqgt5rBTXRW0zvDeVUswSGlwkwzH1lzOB5p2zNSaoSQjFIhxEjed/7Hmpgix/ZUA4UQ8N4zTTPPpwvzurJtGyml6uPdc2/vw4BlmealtpBzrpdjCChjmOb5FjDGmsw5V/2nFR4OR07nC0ob+qtgECPDODIqTTcMnPuB6yh5X9DOHyoMIaKUQSpdMY6S/tIhhby1mjN5y//OYVn0NHE4nej7gfXbd/zTL8KXr+gfP+mN4Sol3fXKqe8RStUOeiHoR8moNWnbcN5XOm4cLgtt12HMhO86YtcR2hYnRNWhDx5b4B0+BlzwFT56QgyEFCsK303hwlqHsgutVahgsT6weM/q3W1IRfDWVqzWsqwrq3XodUcsOyG98tlY5+qE66SXBa0NZolMNqPXjLE72hafUWsmbjfJ5Aoq3g6sKRX4qr/wokOfSlZw8RX+fs5/mU+T79kehbrf8fbMh++33C/8FR030zLzfLngQ/wkzOP+vQ1CUGL9BlV8RODn/72DAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"mongodb-5\"\n        title=\"\"\n        src=\"/static/7a7afdf2faffeb26bfe1b80c0e13a6f5/f058b/mongodb-5.png\"\n        srcset=\"/static/7a7afdf2faffeb26bfe1b80c0e13a6f5/c26ae/mongodb-5.png 158w,\n/static/7a7afdf2faffeb26bfe1b80c0e13a6f5/6bdcf/mongodb-5.png 315w,\n/static/7a7afdf2faffeb26bfe1b80c0e13a6f5/f058b/mongodb-5.png 630w,\n/static/7a7afdf2faffeb26bfe1b80c0e13a6f5/6c2f2/mongodb-5.png 767w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>위에 보이는 URI가 API에 사용될 예정이다 - <em>Node.js API를 개발하는 것이기 때문에 driver 옵션은 넘어가도 된다</em>. 이 전 단계에서 생성한 사용자 이름과 비밀번호를 위 사진 속 빨간색 빈 칸에 <em>[your username:your password]</em> 형태로 넣어야 한다. 필자와 함께 API를 개발하는 것이니 예시는 넘어가도 된다.</p>\n<h2>프로젝트 폴더 생성</h2>\n<p>새로운 프로젝트 폴더를 생성하고 터미널을 열어 아래와 같이 명령어를 입력한다. 해당 명령어를 입력하면 pacakge.json 파일이 생기는데 앱에 필요한 정보나 dependency들을 담고 있는 역할을 한다. 그리고 <code class=\"language-text\">app.ts</code> 파일을 만든다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">cd [project folder directory]\nnpm init -y</code></pre></div>\n<h2>Dependencies 설치</h2>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">npm install <span class=\"token operator\">-</span>g typescript\nnpm install express ts<span class=\"token operator\">-</span>node dotenv nodemon mongodb\nnpm install <span class=\"token operator\">--</span>save<span class=\"token operator\">-</span>dev cross<span class=\"token operator\">-</span>env @types<span class=\"token operator\">/</span>node @types<span class=\"token operator\">/</span>express</code></pre></div>\n<blockquote>\n<p><strong>Express</strong> <em>Node.js 웹 어플리케이션 프레임워크이며 가볍고 다양한 기능을 제공하며 특히 웹과 모바일 어플리케이션에 최적화되어 있다. Express가 API의 핵심 기능을 제공한다고 생각하면 된다.</em></p>\n<p><strong>Dotenv</strong> <em>.env 파일에 선언한 환경 변수들을 process.env라는 객체를 통해 접근할 수 있게 도와주는 라이브러리이다.</em></p>\n<p><strong>Nodemon</strong> <em>Node.js를 기반으로 하는 어플리케이션을 개발할 때 자주 쓰이며 코드를 수정할 시 자동으로 감지하여 어플리케이션을 재시작시켜준다. 배포에는 활용이 되지 않는다.</em></p>\n<p><strong>Typescript</strong> <em>Javascript에 추가적인 문법이 적용되어 에디터에서 재빠르게 에러를 찾아낼 수 있도록 도와준다.</em></p>\n<p><strong>Ts-node</strong> <em>Typescript가 적용된 스크립트가 실행되도록 Javascript로 변환해주는 역할을 한다.</em></p>\n<p><strong>MongoDB</strong> <em>Node.js 용 <a href=\"https://www.mongodb.com/\">MongoDB</a> 드라이버이다.</em></p>\n</blockquote>\n<h2>Typescript 설정</h2>\n<p>앞서 설명했듯이 Typescript는 타입 확인을 엄격하게 적용하여 에디터에서 쉽게 에러를 찾을 수 있도록 도와준다.</p>\n<p>프로젝트 폴더 하위에 tsconfig.json이라는 파일을 만들고 아래 코드를 입력한다.</p>\n<p>개발자의 원하는대로 <strong>compilerOptions</strong> 을 바꿔주면서 사용하면 된다. 이 설정에 관해서 자세한 설명은 생략하오니 더 많은 정보를 원한다면 <a href=\"https://www.typescriptlang.org/docs/handbook/tsconfig-json.html\">공식 웹사이트</a> 확인해주길 바란다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">\"buildOnSave\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"compileOnSave\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"compilerOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string-property property\">\"charset\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"utf8\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-property property\">\"module\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"commonjs\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-property property\">\"target\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"es2018\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-property property\">\"lib\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token string\">\"es2018\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"dom\"</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-property property\">\"noImplicitAny\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-property property\">\"removeComments\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-property property\">\"strictNullChecks\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// \"noImplicitThis\": true,</span>\n        <span class=\"token string-property property\">\"noImplicitThis\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-property property\">\"alwaysStrict\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-property property\">\"preserveConstEnums\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-property property\">\"sourceMap\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// \"esModuleInterop\": true,</span>\n        <span class=\"token string-property property\">\"esModuleInterop\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-property property\">\"noImplicitReturns\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-property property\">\"allowJs\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"include\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">\"src\"</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"exclude\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"node_modules\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"reference_deprecated\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"dist\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"scripts\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"typeRoots\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">\"node_modules/@types\"</span>\n    <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>package.json</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 587px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f6a56c7b7eecf5b00c935aa498ef8b1f/d72eb/package-json.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 17.088607594936708%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAnUlEQVR42i2OS27DMAwFfRI50YekRKl26hZxlrn/oSaI4MWAfMAjOEttg+N8032wt4rkSNeC5kgtiSp50q3gmnEtM6d4J4TAuq6sIXC75lLU2I4XpsLDja0pf73y3HzyPxrn3jl65dwHv26MquzN6CY0KddDIaXI0lunjQcpC5oTboX2LajgJowqDJN54KbTUkvipyo53qfh7eK7fwCXo1fQ9VJdDwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"package-json\"\n        title=\"\"\n        src=\"/static/f6a56c7b7eecf5b00c935aa498ef8b1f/d72eb/package-json.png\"\n        srcset=\"/static/f6a56c7b7eecf5b00c935aa498ef8b1f/c26ae/package-json.png 158w,\n/static/f6a56c7b7eecf5b00c935aa498ef8b1f/6bdcf/package-json.png 315w,\n/static/f6a56c7b7eecf5b00c935aa498ef8b1f/d72eb/package-json.png 587w\"\n        sizes=\"(max-width: 587px) 100vw, 587px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>package.json 안에 script 필드 하위에 명령어 두개를 추가해보자. 복잡한 명령어를 key 이름에 저장한 후 간단하게 <code class=\"language-text\">npm run [key name]</code> 입력하는 방식으로 해당 명령어를 실행할 수 있다.</p>\n<p><code class=\"language-text\">npm run dev</code>를 터미널에 입력하고 엔터를 누르면 실제로 <code class=\"language-text\">cross-env NODE-ENV=development nodemon --exec ts-node ./`app.ts</code> 가 실행된다. 개발모드로 실행되고 nodemon이 코드 수정이 있을 시 자동으로 재시작한다. <strong>start</strong>는 배포 시 사용된다.</p>\n<h2>Express 서버</h2>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> express<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Request<span class=\"token punctuation\">,</span> Response<span class=\"token punctuation\">,</span> NextFunction <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"express\"</span>\n\n<span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token function\">express</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>express<span class=\"token punctuation\">.</span><span class=\"token function\">urlencoded</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">extended</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>express<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// to parse json of body object</span>\n\n<span class=\"token comment\">// get route -> path '/'</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>req<span class=\"token operator\">:</span> Request<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">res</span><span class=\"token operator\">:</span> Response<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token parameter\"><span class=\"token keyword\">void</span></span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Here is the response\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token number\">4000</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Server is running on 4000\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>위 코드를 <code class=\"language-text\">app.ts</code> 파일에 입력한 뒤 <code class=\"language-text\">npm run dev</code>를 터미널에 입력하여 서버를 시작한다. 터미널에 다음과 같이 로그가 뜬다:</p>\n<p><em>the server is listening to the port 4000</em>.</p>\n<p>각각의 라우트는 API를 사용하는 사람이 요청을 보낼 때 쓰이는 url이라고 보면 된다. 위의 코드에는 get 라우트 있는데 경로가 '/'이며 콜백 함수를 파라미터로 가지고 있다. 이 라우트에 요청을 보내게 되면 <em><strong>Here is the response</strong></em> 라는 응답을 받게 된다. 브라우저를 열고 주소 창에 <a href=\"http://localhost:4000%EB%A5%BC\">http://localhost:4000를</a> 입력해보자 - <em>로컬 환경에서 개발하기 때문에 localhost에 접근할 수 있다</em>.</p>\n<p>콜백함수는 주로 2가지 객체를 인자 값으로 받는데 Request와 Response 객체이다.</p>\n<p>Request 객체는 API 사용자가로부터 서버가 받는 정보들의 집합이라고 생각하면 된다. API 개발자는 이 Request 객체가 어떤 필드 값을 가지고 있어야 하는지 목적과 방향에 맞게 사용할 수 있다. 사용자로부터 API 키 값을 필수적으로 받아야 하는 상황이 예가 될 수 있다.</p>\n<p>Response 객체는 API 사용자가 해당 API 라우트로부터 받는 정보이다. API 서버의 목적과 개발 방향에 따라 그 정보가 달라질 것이다.</p>\n<h2>환경 변수</h2>\n<p>환경 변수는 보통 영어는 대문자로 쓰는 것이 일반적이다.</p>\n<p>프로젝트 폴더 하위에 <strong>development.env</strong>와 <strong>production.env</strong> 파일을 만들고 아래와 같이 변수 이름들을 적어 준다.</p>\n<p>MongoDB로부터 얻은 uri를 <strong>MONGODB_URI</strong>로 설정한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token constant\">PORT</span><span class=\"token operator\">=</span><span class=\"token number\">4000</span>\n\n<span class=\"token constant\">MONGO_URI</span><span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>your mongodb uri<span class=\"token punctuation\">]</span>\n<span class=\"token constant\">MONGO_DB</span><span class=\"token operator\">=</span>test<span class=\"token operator\">-</span>db <span class=\"token comment\">// just name whatever you want for development</span>\n<span class=\"token constant\">MONGO_COLLECTION</span><span class=\"token operator\">=</span>test<span class=\"token operator\">-</span>collection <span class=\"token comment\">// just name whatever you want for development</span></code></pre></div>\n<h2>환경 변수 지정</h2>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> dotenv <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'dotenv'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> envFound <span class=\"token operator\">=</span> dotenv<span class=\"token punctuation\">.</span><span class=\"token function\">config</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.env</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>envFound<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Could not find any .env file.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> config <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">port</span><span class=\"token operator\">:</span> <span class=\"token function\">parseInt</span><span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">PORT</span><span class=\"token operator\">!</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">mongodb</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">uri</span><span class=\"token operator\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">MONGO_URI</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">db</span><span class=\"token operator\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">MONGO_DB</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">collection</span><span class=\"token operator\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">MONGO_COLLECTION</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> config<span class=\"token punctuation\">;</span></code></pre></div>\n<p>어플리케이션을 개발할 때 배포 전에 무수히 많은 테스트를 거치는 것이 일반적이다. 이 때문에 개발 설정과 배포 설정을 나누는 것은 굉장히 중요하다.</p>\n<p>cross-env는 환경에 따른 설정을 다르게 적용할 수 있게 도와주는 라이브러리인데 <code class=\"language-text\">cross-env NODE_ENV=production</code> 처럼 입력할 명령어 앞에 두어 어떤 환경인지 명시해 준다. 이 덕분에 다른 .env 파일을 환경에 맞게 설정해주기 때문에 같은 코드를 두번 작성할 필요가 없다.</p>\n<p><code class=\"language-text\">config.ts</code> 하위에 파일을 만든 뒤 dotenv를 import한다. 이 dotenv가 <strong>[process.env.NODE_ENV].env</strong> 파일에 담긴 정보를 읽어 오는 역할을 한다. 이 때 NODE_ENV는 명령어에서 명시해 줬던 development 혹은 production이 되겠다.</p>\n<p>위 코드 안에 모든 환경 변수 앞에 process.env가 붙어 있다. Node.js에 전역에서 접근할 수 있는 객체이기 때문에 어플리케이션 전체에서 사용될 수 있다.</p>\n<h2>어플리케이션에 MongoDB 연결</h2>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> config <span class=\"token keyword\">from</span> <span class=\"token string\">\"./config\"</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> MongoClient <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"mongodb\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">connectMongoDB</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Promise<span class=\"token operator\">&lt;</span>any<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    MongoClient<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>\n      config<span class=\"token punctuation\">.</span>mongodb<span class=\"token punctuation\">.</span>uri<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">useUnifiedTopology</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">useNewUrlParser</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token literal-property property\">err</span><span class=\"token operator\">:</span> Error<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">client</span><span class=\"token operator\">:</span> object</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span>\n          <span class=\"token keyword\">return</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>client<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> connectMongoDB</code></pre></div>\n<p>프로젝트 폴더 하위에 파일 <code class=\"language-text\">db.ts</code>를 만든 뒤, MongoClient를 import한다. 그리고 파일 <code class=\"language-text\">config.ts</code> 만든 뒤 <em>config.mongodb.uri</em> 을 인자 값으로 입력한다. 이 uri는 MongoDB 설정할 때 얻은 uri이다.</p>\n<p>마지막으로 MongoDB를 비동기적으로 연결하도록 promise를 반환 값으로 받게 한다. 이제 API에 테스트 요청을 위해 코드를 수정해보자.</p>\n<h2>테스트 사용자 DB 등록</h2>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> express<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Request<span class=\"token punctuation\">,</span> Response<span class=\"token punctuation\">,</span> NextFunction <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"express\"</span>\n<span class=\"token keyword\">import</span> config <span class=\"token keyword\">from</span> <span class=\"token string\">\"./config\"</span>\n<span class=\"token keyword\">import</span> connectMongoDB <span class=\"token keyword\">from</span> <span class=\"token string\">\"./db\"</span>\n\n<span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token function\">express</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>express<span class=\"token punctuation\">.</span><span class=\"token function\">urlencoded</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">extended</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>express<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>req<span class=\"token operator\">:</span> Request<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">res</span><span class=\"token operator\">:</span> Response<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token parameter\"><span class=\"token keyword\">void</span></span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Here is the response\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span>req<span class=\"token operator\">:</span> Request<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">res</span><span class=\"token operator\">:</span> Response<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Promise<span class=\"token operator\">&lt;</span><span class=\"token keyword\">void</span><span class=\"token operator\">></span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> firstName <span class=\"token operator\">=</span> req<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>firstName\n    <span class=\"token keyword\">const</span> lastName <span class=\"token operator\">=</span> req<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>lastName\n\n    <span class=\"token keyword\">const</span> client <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">connectMongoDB</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> db <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">db</span><span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">.</span>mongodb<span class=\"token punctuation\">.</span>db<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> collection <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> db<span class=\"token punctuation\">.</span><span class=\"token function\">collection</span><span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">.</span>mongodb<span class=\"token punctuation\">.</span>collection<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">await</span> collection<span class=\"token punctuation\">.</span><span class=\"token function\">insertOne</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">firstName</span><span class=\"token operator\">:</span> firstName<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">lastName</span><span class=\"token operator\">:</span> lastName<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n    res<span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Successfully Created in DB\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    res<span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Error Occured in Server\"</span><span class=\"token punctuation\">)</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;POST> '/' error occured\"</span><span class=\"token punctuation\">,</span> err<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">.</span>port<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Server is running on\"</span><span class=\"token punctuation\">,</span> config<span class=\"token punctuation\">.</span>port<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>post 라우트를 추가한다. 이 라우트는 API 사용자로부터 성과 이름을 받고 이를 데이터베이스에 넣는 기능이 목적이다. Request 객체의 body라는 필드에 사용자가 입력한 성과 이름이 저장이 된다.</p>\n<p>MongoDB promise가 resolve한 값을 connect라는 변수를 선언하여 저장한다 - <em><code class=\"language-text\">config.ts</code>에 저장한 데이터베이스와 콜렉션 이름이 여기 쓰인다</em> - 요청에서 받은 성과 이름을 <strong>insertOne</strong> 이라는 함수로 데이터베이스에 입력하게 된다.</p>\n<p>에러 없이 코드가 실행된다면 post 라우트가 status 코드 200과 함께 <em><strong>Successfully Created in DB</strong></em> 라는 정보를 사용자에게 보낸다.</p>\n<h2>Insomnia 요청 테스트</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 548px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/21f9724b06b007f1b24f728d04bfc897/a58fe/insomnia-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.21518987341771%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAACMUlEQVR42p2TXW/SUBjH+0nkZS10UF7KaBNHZC9w74VX84aR4C5mMr+A34O3AdHEmH2BabwQMNFrNV5hcBJBI2EFWmAKtH/zHMZkiTrmSX7paXOeX5+e/g/37ZMO7VTDcDDE0BjA0A2Y0yksyzrHhGVaWHZwTwvHKOWfIH+YQzaTQT6XQy6bRTqdRrFYRKFwiEwmw+alUulKuDvqQ2wqtyF6BIiiiNXVVfj8fng8XqiKirVQCALPw263LwV3M6JiIxrF1uYW1iPr8Pv9kGUZse1thMNhSJIEl8v1VwRBuAQXDAZBkIggQSAQQICeyzLrlhdc4KngXMDzPIPmbrf7EhwVk8jn8zFISB2SMBaLYSMSQViWoYbW2JW6VhQFqqqydfNtmsNJXgkMaQZJ3aKI6K0oXj16jA/PX+D98TPGx5dlnLx+g1qthlarhaOjIzgcDni93gWh9Ft2IXS72R5+efsOP7+3MWp9xajZwqTdhtXtYTqdsohUKhX2I5YXNpvoGQY6vR60fh89XYdpmphMJtcXxuNxfD45QVfT0O12cdrp4MfZGSzTvOiwWq1eT9hoNKDrOhP2+31omobRaPR/n0zCer0OwzAwGAwwHA7ZURyPx+yeRrlcvlpI0AKKRCKRQCqVwu7uLpLJJOPe3h7u7+/jwcEB7u7ssJdfjs0fhHPpysoKg7qw2Wy4YbPB6XTOwi3wLIOL3f1TSFDgKfhURHg8HgQDQRbssDILOG3RYrh/Aammi6h0HbUIAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"insomnia-1\"\n        title=\"\"\n        src=\"/static/21f9724b06b007f1b24f728d04bfc897/a58fe/insomnia-1.png\"\n        srcset=\"/static/21f9724b06b007f1b24f728d04bfc897/c26ae/insomnia-1.png 158w,\n/static/21f9724b06b007f1b24f728d04bfc897/6bdcf/insomnia-1.png 315w,\n/static/21f9724b06b007f1b24f728d04bfc897/a58fe/insomnia-1.png 548w\"\n        sizes=\"(max-width: 548px) 100vw, 548px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Insomnia는 오픈 소스 API 클라이언트인데 쉽게 말해서 API를 개발할 때 기능을 확인하는 데 유용한 도구이다. Insomnia를 통해 지금까지 개발한 API의 post 라우트에 요청을 해보자. Insomnia를 다운로드 받았다면 실행한 뒤 위 그림처럼 HTTP Request를 누른다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 475px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d0c4c2e2644da1b0f59ab116f99b73ec/466da/insomnia-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.202531645569614%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABVUlEQVR42pVQO07DQBDdW1AQeZMQ4v2vvXbASiBOHCJEg0RBR0WJFC5AS8EBuAAFh+Ea9JzhoR3FUYKCEMXTzM68nXlvmHQ9CHOE3GeoTk6R5zlCnmNcjVGGAglP0O12wXmChHNwzund6/Vx2DnA49073l6+8Pr0iefVB5hSEtpoKKmgtYa1lmJ8G22glEKaprDGwTsPawyEEFQfpsdoJre4uVzhevmAq/k9mPceo3JEBCkliqKA9w5CSIQQMCpLqo+rCeb1DGVR0sKiCPA+w2DYRX/QIQyGHCw2W2XOOcrjgHZBm0dogt7iSGhtSL2zniLLsoxUzeoa07Nz1PV08yFCpCkiZ7m4QFPPsGgaVFVFtqkvBAmJyqMz5uguFsaYDVpFG2VrB/aXfrtcKgmWh0AbWst2z4cIt3UStXWGnYFSggmRruULiq2Vn2g5+3o7A/8i/BffzT8Vx6Q2BywAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"insomnia-1\"\n        title=\"\"\n        src=\"/static/d0c4c2e2644da1b0f59ab116f99b73ec/466da/insomnia-2.png\"\n        srcset=\"/static/d0c4c2e2644da1b0f59ab116f99b73ec/c26ae/insomnia-2.png 158w,\n/static/d0c4c2e2644da1b0f59ab116f99b73ec/6bdcf/insomnia-2.png 315w,\n/static/d0c4c2e2644da1b0f59ab116f99b73ec/466da/insomnia-2.png 475w\"\n        sizes=\"(max-width: 475px) 100vw, 475px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>헤더 안에 Content-Type을 application/json으로 설정하여 body 객체에 접근하게 한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 474px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/99d9d57ec0466b20709cd661b263fc9b/5595f/insomnia-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.911392405063296%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABMUlEQVR42pWPPU7DMACFcw+kQpofO7YTN05S0hYiKoZKjAyA1JGlYi0cgL0XqNg4E1yAi3zIriqxMHT45Pcs+fm9SJY51jnarqOua5zXbct8PifPc+I4ZjwekyRJwOuDTxmdn7F5/GD//sPu7Yvd6zdRLRKmsmDqHNoYyrKkqqoQnqZpeHw8PVmWBe8DL+IR96st2+dPXtZ7Nk97ooflLWtbMwhB1TY4VyOlRCtN3/dYa9H6oD1N01AURVjhP81FRpYlZHlKLlKiZWW5qyyNUMjCoJVBSIWUOjT1YUqpoP96v8QYg9YKrU2490RSKWSpcTNFf6Pprg19X7JYVAghQ1uPECJw9P8RTaylcTWzwTKsJlxeTVguHcMwQSkTWpxC5Gd0XYcxJUZ7fP0yzPCzTuUXKh/cdtExTqoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"insomnia-1\"\n        title=\"\"\n        src=\"/static/99d9d57ec0466b20709cd661b263fc9b/5595f/insomnia-3.png\"\n        srcset=\"/static/99d9d57ec0466b20709cd661b263fc9b/c26ae/insomnia-3.png 158w,\n/static/99d9d57ec0466b20709cd661b263fc9b/6bdcf/insomnia-3.png 315w,\n/static/99d9d57ec0466b20709cd661b263fc9b/5595f/insomnia-3.png 474w\"\n        sizes=\"(max-width: 474px) 100vw, 474px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>타입을 JSON으로 두고 firstname, lastname이라는 필드를 가진 객체 형식으로 입력한 뒤 Send 버튼을 누른다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 364px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7297d056ce9e0ca2da867cc47b51918b/e45a9/insomnia-4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.645569620253163%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABR0lEQVR42o2NS2rCYBRGsxSN1mjeiYLR+khCtaB2LZ05KXTQDXTSQTvqoBsRBFMfQyHRJSgqihNHp+QvhY5KLxz4vsPlXql8XeDxvcfTxx3DN59yrUjdaxCGAaZp4Lgu3U4X13XJyjK5XO5PJMfLM3y55eF1wP1zE9f7Phj4PrquY1k2nZsOruOQyWTIZrPIP4dlWfTfTtJUHUt3MDUbVTEoFUsUCgVUVcUyTSzLQtM08ld5DMPAcRxM00RRFOHTnqKpKkqxiFT1PPq9PoN+nyAIqFQqAt/3CcOQRqNBrVbDtm2q1Srtdpv6dV08SvdazSatZkvk1Emz2YzJZEL0GTEej5lOp8znc6IoEiwWC0ajEcvlkvV6TRzHJKtE5NVqRZIkJHEscuqk8/nM4XAQbDYb9vs9p9OJ7XbLbrfjeDwKf7lc+M98AXKyE13dIuIlAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"insomnia-1\"\n        title=\"\"\n        src=\"/static/7297d056ce9e0ca2da867cc47b51918b/e45a9/insomnia-4.png\"\n        srcset=\"/static/7297d056ce9e0ca2da867cc47b51918b/c26ae/insomnia-4.png 158w,\n/static/7297d056ce9e0ca2da867cc47b51918b/6bdcf/insomnia-4.png 315w,\n/static/7297d056ce9e0ca2da867cc47b51918b/e45a9/insomnia-4.png 364w\"\n        sizes=\"(max-width: 364px) 100vw, 364px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>MongoDB에 정보가 입력되었다면 다음과 같이 나타난다:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2e3f18a7711812153d456cc8711d9d52/d67fd/result.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.9620253164557%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABUUlEQVR42p2S625bIQyAef/Hm7KpbapKnc7SZMnOhbu5nG+Ck6rZjy5SLX0YGwPGWBnreNi/8P3pmR9Pe15+Duwen9k97vl1PLHWSsqZlBIxCqWUboukTpTN9y4ql8LodF/QxhBjJKWMdZ550d23aMOsNT4EnPeM89x9IQrjNGOs7ftTLaiQhUvQrOuKcQ7nA3WtPajZTWtr+wUtpulpWQgxdrvFt/V2oUuyZdgOiElIJZNK6nPp8w8kp5uYD7vpW5/6M40c3g5ISgSRLfWboHdyp3xqbxTU6feJYRiw7YlGo7XGOosP/kuonnLOvSZBYn+Gj+HLKG0Ni9EYZzhPE69vR0JOSC3/cq3RPVSrReuj/jlZKNGxSqBGTw2OGq80X90+8H+oNjQZTmcedt+YDgN+vIC+wHKG+YqZoFbuiWq91GTWhtfDkcULId/f+NmBfwEa9lkFn39wWwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"result\"\n        title=\"\"\n        src=\"/static/2e3f18a7711812153d456cc8711d9d52/f058b/result.png\"\n        srcset=\"/static/2e3f18a7711812153d456cc8711d9d52/c26ae/result.png 158w,\n/static/2e3f18a7711812153d456cc8711d9d52/6bdcf/result.png 315w,\n/static/2e3f18a7711812153d456cc8711d9d52/f058b/result.png 630w,\n/static/2e3f18a7711812153d456cc8711d9d52/d67fd/result.png 670w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2>결론</h2>\n<p>API 서버는 보통 개발자 자신 혹은 회사의 목적에 따라 더욱 커지거나 복잡해진다. 크고 복잡한 API 서버를 개발하는 실력을 키우려면 직접 더 많은 크고 작은 프로젝트들을 개발해보는 방법이 가장 도움이 될 가능성이 높다. 예를 들면, 더 많은 라우트를 추가하거나 더 많은 타입 정의들을 써보거나 다른 데이터베이스를 써보는 것이라고 생각한다. 이 간단한 API로부터 더 멋진 API를 개발하기를 바라면서 마무리하겠다.</p>\n<p>해당 글에서 사용된 코드는 개인 github <a href=\"https://github.com/shkim04/express_typescript_simple_api\">레파지토리</a>에 있으니 필요하시면 확인해 주세요!</p>\n<p><em><strong>읽어 주셔서 감사합니다. To be continued!</strong></em></p>\n<p><em>이 글은 <a href=\"https://medium.com/@shkim04/node-js-how-to-create-a-simple-rest-api-with-express-mongodb-and-typescript-54b1d801d073\">Medium</a>에도 업로드 되었습니다.</em>\n<em>놀러 오세요!</em></p>","frontmatter":{"title":"Express, MongoDB, Typescript로 REST API 개발하기","date":"2022년 12월 01일","description":"","tag":["NodeJS","Database"]},"fields":{"locale":"ko"}},"previous":{"fields":{"slug":"/react-native-modal-구현하기"},"frontmatter":{"title":"React Native Modal Expo로 구현하기"}},"next":{"fields":{"slug":"/aws-ec2-인스턴트-시작-node-설치"},"frontmatter":{"title":"AWS EC2 인스턴스 생성 후 Node 설치하기"}}},"pageContext":{"locale":"ko","isDefaultLang":true,"slug":"/express-mongodb-typescript로-restapi-개발하기","titleByLang":{"ko":"express-mongodb-typescript로-restapi-개발하기","en":"restapi-with-express-mongodb-typescript"},"dateFormat":"YYYY년 MM월 DD일","id":"3b00f57e-84a9-5e8d-bb8d-5a5a8eaaf2af","previousPostId":"d4695c3a-9b3f-58f1-b8fe-fd8882c81153","nextPostId":"77f39f43-dd3e-5cfe-b0c7-f27e200976ae"}},"staticQueryHashes":[],"slicesMap":{}}