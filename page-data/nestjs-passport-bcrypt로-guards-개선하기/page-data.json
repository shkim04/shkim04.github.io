{"componentChunkName":"component---src-templates-blog-post-js","path":"/nestjs-passport-bcrypt로-guards-개선하기/","result":{"data":{"site":{"siteMetadata":{"title":"Seunghyun's Blog"}},"markdownRemark":{"id":"7507bc71-d607-5b2b-9641-2b62ddaec5fb","excerpt":"인증이 안된 사용자가 리뷰를 삭제하지 못하도록  resolver에 있는 delete 메소드에 Guard…","html":"<p>인증이 안된 사용자가 리뷰를 삭제하지 못하도록 <code class=\"language-text\">review</code> resolver에 있는 delete 메소드에 <strong>Guard</strong>를 적용했습니다. 그러나 인증이 지나치게 간단하여 적절하지 못한 방법입니다. 보안을 위해 인증 과정을 개선할 필요가 있습니다. 이를 위해 <code class=\"language-text\">passport</code>와 <code class=\"language-text\">bcrypt</code>를 사용할 것입니다.</p>\n<h2>디펜던시 설치</h2>\n<p>우선, <code class=\"language-text\">passport</code>와 <code class=\"language-text\">bcrypt</code>에 필요한 디펜던시를 설치합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm install --save @nestjs/passport passport passport-local\nnpm install --save-dev @types/passport-local\n\nnpm install bcrypt\nnpm install -D @types/bcrypt</code></pre></div>\n<p>보시다시피 필자는 <code class=\"language-text\">passport</code> 전략으로 <strong>local</strong>을 선택했습니다. 커뮤니티를 간략하게 살펴본 결과 <strong>local</strong> 전략과 <strong>jwt</strong> 전략이 서로를 보완해주기 때문에 둘을 혼용하는 것이 효과적인 것으로 보입니다. 이후에 더 살펴보겠지만 현재는 입력 비밀번호와 이 입력에 상응하는 리뷰에 저장된 비밀번호와 일치하는 것만 처리할 것이기 때문에 <strong>local</strong>만 사용해도 충분하다고 생각합니다. 필요시 이 과정을 더 심화시킬 예정입니다.</p>\n<h2>Auth 서비스</h2>\n<p><code class=\"language-text\">validateContributor</code> 메소드를 가진 <code class=\"language-text\">auth</code> 서비스를 생성합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">@<span class=\"token function\">Injectable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AuthService</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token keyword\">private</span> <span class=\"token literal-property property\">reviewsService</span><span class=\"token operator\">:</span> ReviewsService</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">async</span> <span class=\"token function\">validateContributor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">reviewData</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> review <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>reviewsService<span class=\"token punctuation\">.</span><span class=\"token function\">getReview</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">contributedBy</span><span class=\"token operator\">:</span> reviewData<span class=\"token punctuation\">.</span>contributedBy<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> isMatch <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">comparePassword</span><span class=\"token punctuation\">(</span>\n      reviewData<span class=\"token punctuation\">.</span>password<span class=\"token punctuation\">,</span>\n      review<span class=\"token punctuation\">.</span>password<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>isMatch<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> review<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// ...</span>\n\n  <span class=\"token keyword\">async</span> <span class=\"token function\">comparePassword</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">password<span class=\"token punctuation\">,</span> hash</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> isMatch <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> bcrypt<span class=\"token punctuation\">.</span><span class=\"token function\">compare</span><span class=\"token punctuation\">(</span>password<span class=\"token punctuation\">,</span> hash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> isMatch<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이 서비스는 delete review 입력을 읽고 이 입력에 맞는 리뷰가 있는지 확인하고 비밀번호를 비교합니다. 이 메소드를 <code class=\"language-text\">passport</code> 전략에서 사용할 것입니다.</p>\n<h2>LocalStrategy</h2>\n<p><code class=\"language-text\">LocalStrategy</code>를 생성합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">@<span class=\"token function\">Injectable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">LocalStrategy</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">PassportStrategy</span><span class=\"token punctuation\">(</span>Strategy<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token keyword\">private</span> <span class=\"token literal-property property\">authService</span><span class=\"token operator\">:</span> AuthService</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">usernameField</span><span class=\"token operator\">:</span> <span class=\"token string\">'contributedBy'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">async</span> <span class=\"token function\">validate</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">contributedBy<span class=\"token punctuation\">,</span> password</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> review <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>authService<span class=\"token punctuation\">.</span><span class=\"token function\">validateContributor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      contributedBy<span class=\"token punctuation\">,</span>\n      password<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>review<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">UnauthorizedException</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> review<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>기본값으로 local 전략은 요청 body로부터 <code class=\"language-text\">username</code>과 <code class=\"language-text\">password</code>를 읽습니다. 이 때문에 필자는 <code class=\"language-text\">super</code>에 <code class=\"language-text\">contributedBy</code>를 전달하여 <code class=\"language-text\">username</code> 필드를 대체했습니다.</p>\n<p><code class=\"language-text\">validate</code> 메소드가 body 객체로부터 <code class=\"language-text\">contributedBy</code>와 <code class=\"language-text\">password</code>를 얻어 해당 사용자를 인증합니다. 인증이 되었다면 <strong>라우터 핸들러</strong>가 처리할 수 있게 전달합니다.</p>\n<h2>Graphql Guards</h2>\n<p><code class=\"language-text\">GqlAuthGuard</code>를 생성합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">@<span class=\"token function\">Injectable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">GqlAuthGuard</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AuthGuard</span><span class=\"token punctuation\">(</span><span class=\"token string\">'local'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">getRequest</span><span class=\"token punctuation\">(</span>context<span class=\"token operator\">:</span> GqlExecutionContext<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> any <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> ctx <span class=\"token operator\">=</span> GqlExecutionContext<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> req <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> ctx<span class=\"token punctuation\">.</span><span class=\"token function\">getContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> deleteReviewData <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> ctx<span class=\"token punctuation\">.</span><span class=\"token function\">getArgs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    req<span class=\"token punctuation\">.</span>body <span class=\"token operator\">=</span> deleteReviewData<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> req<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">@nestjs/passport</code>는 내장 <strong>Guard</strong>를 제공합니다. 하지만 <strong>Graphql</strong>를 사용하기 때문에 내장 Guard인 <strong>AuthGuard</strong>를 확장시킨 Guard를 생성한 다음에 context와 body 객체를 수정해야 합니다.</p>\n<p>마지막으로 <code class=\"language-text\">review</code> resolver에 있는 delete 메소드 위에 <strong>GqlAuthGuard</strong>를 넣어줍니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">@<span class=\"token function\">Mutation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Review<span class=\"token punctuation\">)</span>\n@<span class=\"token function\">UseGuards</span><span class=\"token punctuation\">(</span>GqlAuthGuard<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">async</span> <span class=\"token function\">deleteReview</span><span class=\"token punctuation\">(</span>\n  @<span class=\"token function\">Args</span><span class=\"token punctuation\">(</span><span class=\"token string\">'deleteReviewData'</span><span class=\"token punctuation\">)</span> deleteReviewData<span class=\"token operator\">:</span> DeleteReviewInput<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Promise<span class=\"token operator\">&lt;</span>Review<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>reviewService<span class=\"token punctuation\">.</span><span class=\"token function\">deleteReview</span><span class=\"token punctuation\">(</span>deleteReviewData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>테스트</h2>\n<h3>리뷰 생성</h3>\n<p>필자는 <code class=\"language-text\">rightpassword</code>라는 비밀번호로 리뷰를 생성했습니다. 비밀번호는 <code class=\"language-text\">bcrypt</code>를 사용하여 hash로 데이터베이스에 저장되었습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/55021c3d7cc4a4959752d476eb182d25/f3c12/create-review.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 29.746835443037973%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAv0lEQVR42p2LwU7EIBRF+xPKu0/duJPKTAstDJRCNdN0qv7/9ximmYzdmpyQk/O4FanhQQZR/4fq5eCV7V8bBxVLkn73Q+5d7kolav/c5ie7svvh/gK7cJuhBvEeCn9l43B9b+PwWA8wC+sz+gnxzHHGacIpw0+IHxjuTjYVN+k2ll7IAD3DrNx9c/cFs5JK1EYyI2yGy3SMQo/UjOLN35GhEm0kPbKbOVzYLeg/6Ri2Jelyoi4V71Lx5lq22MRfnDM+PcY+bcwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"create-reivew\"\n        title=\"\"\n        src=\"/static/55021c3d7cc4a4959752d476eb182d25/f058b/create-review.png\"\n        srcset=\"/static/55021c3d7cc4a4959752d476eb182d25/c26ae/create-review.png 158w,\n/static/55021c3d7cc4a4959752d476eb182d25/6bdcf/create-review.png 315w,\n/static/55021c3d7cc4a4959752d476eb182d25/f058b/create-review.png 630w,\n/static/55021c3d7cc4a4959752d476eb182d25/f3c12/create-review.png 764w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3>잘못된 비밀번호로 삭제 요청</h3>\n<p><code class=\"language-text\">Unauthorized</code> 에러를 냅니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 544px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/80cc2b4b5f88abd79de81f17e4a4ca1b/b3e51/delete-unauthorized.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 84.17721518987341%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAABn0lEQVR42p1TWW7bMBTMIWqJj6x/2rpAKJJa7GghRUW266RpEiABev+rTCHK6uLGSeyPwYgPwuAtMxci9YgShw/SYiZt4EhaxEmDOLEn4yJWDp/zCouixCKv8LUoMTcOpP15glFiMTc1FkWNL1mJT1kF0g5ct4jlvktp/+XkyDt0mIwjkukwUx6zxCEOsGDag2mHWI/vwMpimCrwVD8UDLisQcUNhH0CL+8h3E/wfANmLJjtQX4NategpgeVHeh6A1p1IOWOCMoGlG9B5X0QnDDUhPEg047/KfuHj438G8pBFFsw3YEpv2cHCiLunVc+KHDtwMz1iLQHUy1i5U+wzUEhkg1YtgG/ugMvf4Rj8XwXOj1LcDA05d/GHVYPENUjuOnA0t27xv5PUKTd/nuyT3NiUg72Fw4wGFqeG72/bDNfbkHDIdI1SLejx+TxVLwpyLIthHsGL+/Asw4i7xDrfTKmlJy0w8sa7KoF+R40pGNIw5QO178YtVcFP5oWTDaIZI04oBn53B2K1S346jtowPIGVOxAy1uQ8eBT9N4Q/AUqUv1P+FfpFwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"delete-unauthorized\"\n        title=\"\"\n        src=\"/static/80cc2b4b5f88abd79de81f17e4a4ca1b/b3e51/delete-unauthorized.png\"\n        srcset=\"/static/80cc2b4b5f88abd79de81f17e4a4ca1b/c26ae/delete-unauthorized.png 158w,\n/static/80cc2b4b5f88abd79de81f17e4a4ca1b/6bdcf/delete-unauthorized.png 315w,\n/static/80cc2b4b5f88abd79de81f17e4a4ca1b/b3e51/delete-unauthorized.png 544w\"\n        sizes=\"(max-width: 544px) 100vw, 544px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3>정상 비밀번호로 삭제 요청</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/49f4be4b6e5ef4fa15c9faa07fe22c44/9f21b/delete-authorized.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.139240506329116%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA4klEQVR42q3S0U4DIRAF0P5EC4Om790FbFOWtQzCrjbZpv3/77mGpdGqMTGxD/cBCCfDDAtlI1ZNwLIJEO3/sxAtY7P30M7h0TKkiRDNAaIt4b9jzQcYoCxj7U9Q/gLlzyA3gboJD9sEqa+oDhCGa/T3NUPYuj+Dq1LR0wjVnUHbAcRvUPEIxa8gl0CHDPIZxAOoz6AwgLoE4nE+k32GfM4gGytYIk2C2k+g3XGusOCqv4DsC2S57FOF4gjpUo1Pn9W3N08mE0GGf+/N7cB0+IF8GUrpUQHvMeEZLN/mXlgB3wEW3PBpqDxVIQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"delete-authorized\"\n        title=\"\"\n        src=\"/static/49f4be4b6e5ef4fa15c9faa07fe22c44/f058b/delete-authorized.png\"\n        srcset=\"/static/49f4be4b6e5ef4fa15c9faa07fe22c44/c26ae/delete-authorized.png 158w,\n/static/49f4be4b6e5ef4fa15c9faa07fe22c44/6bdcf/delete-authorized.png 315w,\n/static/49f4be4b6e5ef4fa15c9faa07fe22c44/f058b/delete-authorized.png 630w,\n/static/49f4be4b6e5ef4fa15c9faa07fe22c44/9f21b/delete-authorized.png 706w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><em><strong>읽어 주셔서 감사합니다. To be continued!</strong></em></p>\n<h3>참조</h3>\n<ul>\n<li><a href=\"https://docs.nestjs.com/recipes/passport\">https://docs.nestjs.com/recipes/passport</a></li>\n</ul>","frontmatter":{"title":"#6 Nestjs passport와 bcrypt로 Guard 개선하기","date":"2023년 08월 04일","description":"","tag":["Project","NodeJS"]},"fields":{"locale":"ko"}},"previous":{"fields":{"slug":"/nestjs-guards-적용하기"},"frontmatter":{"title":"#5 리뷰 임의 삭제 방지를 위한 Guard 적용하기"}},"next":{"fields":{"slug":"/mixin과-pipe로-guard-리팩토링하기"},"frontmatter":{"title":"#7 Mixin과 Pipe로 Guard 리팩토링하기"}}},"pageContext":{"locale":"ko","isDefaultLang":true,"slug":"/nestjs-passport-bcrypt로-guards-개선하기","titleByLang":{"ko":"nestjs-passport-bcrypt로-guards-개선하기","en":"improve-guards-using-nestjs-passport-bcrypt"},"dateFormat":"YYYY년 MM월 DD일","id":"7507bc71-d607-5b2b-9641-2b62ddaec5fb","previousPostId":"ca3048de-bc02-5d1f-ad11-48348cffb441","nextPostId":"4eef3e9b-c412-5df2-aa8e-ea8346d1723e"}},"staticQueryHashes":[],"slicesMap":{}}